(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1d28ebd3"],{"1c83":function(t,e,a){"use strict";a.d(e,"a",(function(){return i})),a.d(e,"b",(function(){return s})),a.d(e,"d",(function(){return l})),a.d(e,"c",(function(){return c}));var n=a("b775");function i(t){var e=t.labelId?"update":"add";return Object(n["a"])({url:"kmDocumentLabel/"+e,method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function s(t){return Object(n["a"])({url:"kmDocumentLabel/deleteById/".concat(t),method:"post"})}function l(t){return Object(n["a"])({url:"kmDocumentLabel/queryList",method:"post",data:t})}function c(t){return Object(n["a"])({url:"kmDocumentLabel/queryDocumentByLabelId",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}},3544:function(t,e,a){"use strict";a("5acc")},3892:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search-container"},[a("xr-header",{attrs:{"icon-class":"wk wk-book","icon-color":"#fb9924",label:"知识库"}}),t._v(" "),a("el-container",{staticClass:"search-body"},[a("el-aside",[a("div",{staticClass:"sec-title"},[t._v("\n        全部标签\n      ")]),t._v(" "),a("el-input",{staticClass:"input-box",attrs:{"prefix-icon":"el-icon-search",placeholder:"搜索标签"},on:{input:t.handleSearchTag},model:{value:t.searchKeyword,callback:function(e){t.searchKeyword=e},expression:"searchKeyword"}}),t._v(" "),a("ul",{staticClass:"options"},t._l(t.tagList,(function(e,n){return a("li",{key:n,staticClass:"option-item text-one-line",class:{active:e.labelId==t.activeLabel.labelId},on:{click:function(a){t.handleFilter(e)}}},[t._v("\n          "+t._s(e.name)+"\n        ")])})))],1),t._v(" "),a("el-main",[t.activeLabel?a("div",{staticClass:"search-res-title"},[t._v("\n        标签为 "),a("span",{staticClass:"special"},[t._v("“ "+t._s(t.activeLabel.name)+" ”")]),t._v(" 的筛选结果共"+t._s(t.total||0)+"条\n      ")]):t._e(),t._v(" "),a("div",{staticClass:"search-res"},t._l(t.dataList,(function(e,n){return a("search-res-item",{key:n,attrs:{data:e,"show-content":!1,"show-label":""},on:{titleClick:t.titleClick}})}))),t._v(" "),a("div",{staticClass:"page-container"},[a("el-pagination",{staticClass:"p-bar",attrs:{"current-page":t.currentPage,"page-sizes":t.pageSizes,"page-size":t.pageSize,total:t.total,"pager-count":5,background:"",layout:"prev, pager, next, sizes, total, jumper"},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])],1)],1)},i=[],s=(a("99af"),a("7db0"),a("d3b7"),a("4de4"),a("caad"),a("2532"),a("b0c0"),a("159b"),a("14d9"),a("1c83")),l=a("c024"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("flexbox",{staticClass:"xr-header"},[t.iconClass?a("div",{staticClass:"xr-header__icon",style:{backgroundColor:t.iconColor}},[a("i",{class:t.iconClass})]):t._e(),t._v(" "),a("div",{staticClass:"xr-header__label"},[t.$slots.label?t._t("label"):[t._v(t._s(t.label)),t._t("otherLabel")]],2),t._v(" "),t.showSearch?a("el-input",t._b({staticClass:"xr-header__search",style:{"margin-top":t.ftTop},attrs:{placeholder:t.placeholder},on:{input:t.inputChange},nativeOn:{keyup:function(e){return!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchClick(e)}},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}},"el-input",t.inputAttr,!1),[a("el-button",{attrs:{slot:"suffix",type:"icon",icon:"wk wk-sousuo"},on:{click:t.searchClick},slot:"suffix"})],1):t._e(),t._v(" "),a("div",{staticClass:"xr-header__ft",style:{top:t.ftTop}},[t._t("ft")],2)],1)},r=[],o=(a("a9e3"),a("ac1f"),a("841c"),{name:"XrHeader",components:{},props:{iconClass:[String,Array],iconColor:String,label:String,showSearch:{type:Boolean,default:!1},placeholder:{type:String,default:"请输入内容"},ftTop:{type:String,default:"0"},content:[String,Number],inputAttr:{type:Object,default:function(){}}},data:function(){return{search:""}},computed:{},watch:{content:{handler:function(){this.search!=this.content&&(this.search=this.content)},immediate:!0}},mounted:function(){},beforeDestroy:function(){},methods:{inputChange:function(){this.$emit("update:content",this.search)},searchClick:function(){this.$emit("search",this.search)}}}),u=o,d=(a("f9b7"),a("2877")),h=Object(d["a"])(u,c,r,!1,null,"20e1a242",null),f=h.exports,p={name:"FilterByLabel",components:{XrHeader:f,SearchResItem:l["a"]},data:function(){return{allTagList:[],tagList:[],activeLabel:null,searchKeyword:"",filterLabelId:"",currentPage:1,pageSize:15,pageSizes:[15,30,60,100],total:100,dataList:[]}},created:function(){this.getAllTag()},methods:{getAllTag:function(){var t=this;this.filterLabelId=this.$route.query.labelId||null,Object(s["d"])().then((function(e){t.tagList=e.data||[],t.allTagList=[].concat(t.tagList),t.activeLabel=t.tagList.find((function(e){return e.labelId==t.filterLabelId}))||null,t.refreshList()}))},handleFilter:function(t){this.activeLabel=t,this.filterLabelId=t.labelId,this.refreshList()},handleSearchTag:function(){var t=this;this.searchKeyword?this.tagList=this.allTagList.filter((function(e){return e.name.includes(t.searchKeyword)})):this.tagList=[].concat(this.allTagList)},getListByLabelId:function(){var t=this;Object(s["c"])({page:this.currentPage,limit:this.pageSize,labelId:this.filterLabelId||null}).then((function(e){var a=e.data.list||[];a.forEach((function(e){var a=e.labelIds.split(",");e.labelList=[],a.forEach((function(a){var n=t.tagList.find((function(t){return t.labelId==a}));n&&e.labelList.push(n)}))})),t.dataList=a,t.total=e.data.totalRow}))},refreshList:function(){this.handleCurrentChange(1)},handleSizeChange:function(t){this.pageSize=t,this.getListByLabelId()},handleCurrentChange:function(t){this.currentPage=t,this.getListByLabelId()},titleClick:function(t){if("bin"!==this.type){var e={id:t.libraryId,folderId:t.folderId};t.documentId&&(e.documentId=t.documentId,e.type=t.type),this.$router.push({path:"/knowledge/main",query:e})}}}},b=p,g=(a("3544"),Object(d["a"])(b,n,i,!1,null,"97775a5a",null));e["default"]=g.exports},"5a5d":function(t,e,a){},"5acc":function(t,e,a){},c024:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search-res-item"},[a("div",{staticClass:"item-header"},[a("i",{staticClass:"wk wk-doc icon"}),t._v(" "),a("span",{staticClass:"title",on:{click:t.titleClick}},[t._v("\n      "+t._s(t.data.title)+"\n    ")])]),t._v(" "),t.showContent?a("div",{staticClass:"item-content"},[t._v("\n    "+t._s(t.content)+"\n  ")]):t._e(),t._v(" "),a("div",{staticClass:"item-footer"},[t._v("\n    "+t._s(t.data.libraryName)+" | "+t._s(t.data.updateTime||t.data.createTime)+" ")]),t._v(" "),t.showLabel?a("flexbox",{staticClass:"label-box",attrs:{align:"center",justify:"flex-start"}},t._l(t.data.labelList,(function(e,n){return a("div",{key:n,staticClass:"label",style:{backgroundColor:e.color}},[t._v("\n      "+t._s(e.name)+"\n    ")])}))):t._e()],1)},i=[],s=(a("ac1f"),a("5319"),{name:"SearchResItem",props:{data:Object,showLabel:{type:Boolean,default:!1},showContent:{type:Boolean,default:!0}},computed:{content:function(){var t=this.data.content.replace(/<[^>]+>/g,"").replace(/[ ]|[\r\n]/g,"")||"";return t}},methods:{titleClick:function(){this.$emit("titleClick",this.data)}}}),l=s,c=(a("eab5"),a("2877")),r=Object(c["a"])(l,n,i,!1,null,"5da6f377",null);e["a"]=r.exports},eab5:function(t,e,a){"use strict";a("fcfa")},f9b7:function(t,e,a){"use strict";a("5a5d")},fcfa:function(t,e,a){}}]);