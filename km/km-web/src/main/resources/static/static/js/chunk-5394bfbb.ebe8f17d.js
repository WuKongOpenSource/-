(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5394bfbb"],{"56f7":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-empty",{staticStyle:{"padding-top":"75px"},attrs:{"image-size":300,image:a("f86a"),description:t.text}})},s=[],r={name:"NoData",props:{text:{type:String,default:"暂无数据"}}},n=r,l=a("2877"),c=Object(l["a"])(n,i,s,!1,null,"d1844068",null);e["a"]=c.exports},8601:function(t,e,a){},a107:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search-container"},[a("div",{staticClass:"header"},[a("el-button",{staticClass:"btn-back",attrs:{type:"text",icon:"el-icon-arrow-left"},on:{click:function(e){t.$router.go(-1)}}},[t._v("\n      返回\n    ")])],1),t._v(" "),a("div",{staticClass:"search-input"},[a("el-input",{attrs:{maxlength:50,placeholder:"请输入关键字"},model:{value:t.form.search,callback:function(e){t.$set(t.form,"search",e)},expression:"form.search"}},[a("el-button",{attrs:{slot:"append",type:"icon",icon:"wk wk-sousuo"},on:{click:t.searcClick},slot:"append"})],1)],1),t._v(" "),a("el-container",{staticClass:"search-body"},[a("el-aside",{attrs:{width:"240px"}},[a("div",{staticClass:"filter-sec"},[a("div",{staticClass:"input-box"},[a("div",{staticClass:"label"},[t._v("\n            创建人\n          ")]),t._v(" "),a("wk-user-dialog-select",{staticStyle:{width:"100%"},attrs:{radio:""},on:{change:t.refreshList},model:{value:t.form.createUserId,callback:function(e){t.$set(t.form,"createUserId",e)},expression:"form.createUserId"}})],1),t._v(" "),a("div",{staticClass:"input-box"},[a("div",{staticClass:"label"},[t._v("\n            在下面知识库中\n          ")]),t._v(" "),a("el-select",{attrs:{filterable:"",clearable:""},on:{change:t.refreshList},model:{value:t.form.libraryId,callback:function(e){t.$set(t.form,"libraryId",e)},expression:"form.libraryId"}},t._l(t.libraryList,(function(t){return a("el-option",{key:t.libraryId,attrs:{label:t.name,value:t.libraryId}})})))],1)]),t._v(" "),a("div",{staticClass:"filter-sec"},[a("div",{staticClass:"sec-title"},[t._v("\n          最近更新\n        ")]),t._v(" "),a("div",{staticClass:"sec-body"},[a("ul",{staticClass:"options"},t._l(t.timeIntervalType,(function(e,i){return a("li",{key:i,staticClass:"option-item",class:{active:t.form.type===e.value},on:{click:function(a){t.typeClick(e)}}},[t._v("\n              "+t._s(e.label)+"\n            ")])}))),t._v(" "),5===t.form.type?a("div",{staticClass:"time-select"},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",placeholder:"开始时间"},on:{change:t.refreshList},model:{value:t.form.startTime,callback:function(e){t.$set(t.form,"startTime",e)},expression:"form.startTime"}}),t._v(" "),a("div",{staticClass:"line"}),t._v(" "),a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",placeholder:"结束时间"},on:{change:t.refreshList},model:{value:t.form.endTime,callback:function(e){t.$set(t.form,"endTime",e)},expression:"form.endTime"}})],1):t._e()])])]),t._v(" "),a("el-main",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}]},[a("div",{staticClass:"search-res"},[t.dataList.length?t._l(t.dataList,(function(e,i){return a("search-res-item",{key:i,attrs:{data:e},on:{titleClick:t.titleClick}})})):a("no-data",{staticClass:"no-data",staticStyle:{height:"calc(100vh - 300px)"}})],2),t._v(" "),a("div",{staticClass:"page-container"},[a("el-pagination",{staticClass:"p-bar",attrs:{"current-page":t.currentPage,"page-sizes":t.pageSizes,"page-size":t.pageSize,total:t.total,"pager-count":5,background:"",layout:"prev, pager, next, sizes, total, jumper"},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])],1)],1)},s=[],r=(a("ac1f"),a("841c"),a("5319"),a("14d9"),a("b729")),n=a("56f7"),l=a("c024"),c=a("8f81"),o={name:"KnowLedgeSearch",components:{SearchResItem:l["a"],WkUserDialogSelect:c["a"],NoData:n["a"]},data:function(){return{loading:!1,timeIntervalType:[{label:"任意时间",value:"all"},{label:"今天",value:1},{label:"上周",value:2},{label:"上月",value:3},{label:"去年",value:4},{label:"自定义时间",value:5}],libraryList:[],timeIndex:1,form:{type:"all",search:"",createUserId:""},currentPage:1,pageSize:15,pageSizes:[15,30,60,100],total:100,dataList:[]}},created:function(){this.form.search=this.$route.query.kw,this.getLibraryList(),this.refreshList()},methods:{getLibraryList:function(){var t=this;Object(r["h"])().then((function(e){t.libraryList=e.data||[]})).catch()},searcClick:function(){this.$router.replace({path:this.$route.params[0],query:{kw:this.form.search,navActiveMenu:this.$route.query.navActiveMenu||"/knowledge/index"}}),this.refreshList()},typeClick:function(t){this.form.type=t.value,this.refreshList()},refreshList:function(){this.handleCurrentChange(1)},getList:function(){var t=this,e={page:this.currentPage,limit:this.pageSize,search:this.form.search};"all"!=this.form.type&&(e.type=this.form.type,5==this.form.type&&(e.startTime=this.form.startTime,e.endTime=this.form.endTime)),this.form.createUserId&&(e.createUserId=this.form.createUserId),e.libraryId=this.form.libraryId,this.loading=!0,Object(r["m"])(e).then((function(e){t.dataList=e.data.list,e.data.totalRow&&Math.ceil(e.data.totalRow/t.pageSize)<t.currentPage&&t.currentPage>1?(t.currentPage=t.currentPage-1,t.getList()):(t.total=e.data.totalRow,t.loading=!1)})).catch((function(){t.loading=!1}))},handleSizeChange:function(t){this.pageSize=t,this.getList()},handleCurrentChange:function(t){this.currentPage=t,this.getList()},titleClick:function(t){if("bin"!==this.type){var e={id:t.libraryId,folderId:t.folderId};t.documentId&&(e.documentId=t.documentId,e.type=t.type),e.navActiveMenu=this.$route.query.navActiveMenu||"/knowledge/index",this.$router.push({path:"/knowledge/main",query:e})}}}},d=o,u=(a("ba17"),a("2877")),f=Object(u["a"])(d,i,s,!1,null,"357569fe",null);e["default"]=f.exports},ba17:function(t,e,a){"use strict";a("8601")},c024:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"search-res-item"},[a("div",{staticClass:"item-header"},[a("i",{staticClass:"wk wk-doc icon"}),t._v(" "),a("span",{staticClass:"title",on:{click:t.titleClick}},[t._v("\n      "+t._s(t.data.title)+"\n    ")])]),t._v(" "),t.showContent?a("div",{staticClass:"item-content"},[t._v("\n    "+t._s(t.content)+"\n  ")]):t._e(),t._v(" "),a("div",{staticClass:"item-footer"},[t._v("\n    "+t._s(t.data.libraryName)+" | "+t._s(t.data.updateTime||t.data.createTime)+" ")]),t._v(" "),t.showLabel?a("flexbox",{staticClass:"label-box",attrs:{align:"center",justify:"flex-start"}},t._l(t.data.labelList,(function(e,i){return a("div",{key:i,staticClass:"label",style:{backgroundColor:e.color}},[t._v("\n      "+t._s(e.name)+"\n    ")])}))):t._e()],1)},s=[],r=(a("ac1f"),a("5319"),{name:"SearchResItem",props:{data:Object,showLabel:{type:Boolean,default:!1},showContent:{type:Boolean,default:!0}},computed:{content:function(){var t=this.data.content.replace(/<[^>]+>/g,"").replace(/[ ]|[\r\n]/g,"")||"";return t}},methods:{titleClick:function(){this.$emit("titleClick",this.data)}}}),n=r,l=(a("eab5"),a("2877")),c=Object(l["a"])(n,i,s,!1,null,"5da6f377",null);e["a"]=c.exports},eab5:function(t,e,a){"use strict";a("fcfa")},f86a:function(t,e,a){t.exports=a.p+"static/img/data.ed0530b9.png"},fcfa:function(t,e,a){}}]);