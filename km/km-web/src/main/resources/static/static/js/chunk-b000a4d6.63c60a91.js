(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-b000a4d6","chunk-ecda3c48"],{"03d4":function(t,e,a){"use strict";a("f0a8")},"0a82":function(t,e,a){"use strict";a("9992")},"15f4":function(t,e,a){"use strict";a("273c")},"1c83":function(t,e,a){"use strict";a.d(e,"a",(function(){return n})),a.d(e,"b",(function(){return s})),a.d(e,"d",(function(){return o})),a.d(e,"c",(function(){return l}));var i=a("b775");function n(t){var e=t.labelId?"update":"add";return Object(i["a"])({url:"kmDocumentLabel/"+e,method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function s(t){return Object(i["a"])({url:"kmDocumentLabel/deleteById/".concat(t),method:"post"})}function o(t){return Object(i["a"])({url:"kmDocumentLabel/queryList",method:"post",data:t})}function l(t){return Object(i["a"])({url:"kmDocumentLabel/queryDocumentByLabelId",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}},"1d17":function(t,e,a){},"273c":function(t,e,a){},"297f":function(t,e,a){"use strict";a("b1af")},"2e68":function(t,e,a){},"3aa1":function(t,e,a){},4605:function(t,e,a){"use strict";a("f612")},5513:function(t,e,a){},"56f7":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-empty",{staticStyle:{"padding-top":"75px"},attrs:{"image-size":300,image:a("f86a"),description:t.text}})},n=[],s={name:"NoData",props:{text:{type:String,default:"暂无数据"}}},o=s,l=a("2877"),c=Object(l["a"])(o,i,n,!1,null,"d1844068",null);e["a"]=c.exports},"582a":function(t,e,a){"use strict";a("fb4d")},"5c68":function(t,e,a){"use strict";a("f880")},"697c":function(t,e,a){"use strict";a("5513")},"6b4a":function(t,e,a){},"70b6":function(t,e,a){"use strict";a("2e68")},7395:function(t,e,a){"use strict";a("e5bb")},"7fd8":function(t,e,a){"use strict";a("bc73")},"899c":function(t,e,a){},"8e51":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"knowledge-main"},[a("el-container",[a("el-aside",{attrs:{width:"240px"}},[t.libraryData?a("flexbox",{staticClass:"header-cell"},[a("flexbox",{staticClass:"header-cell__hd",attrs:{justify:"center"}},[a("img",{directives:[{name:"src",rawName:"v-src",value:t.libraryData.coverUrl,expression:"libraryData.coverUrl"}],staticClass:"pic",attrs:{alt:""}})]),t._v(" "),a("div",{staticClass:"header-cell__bd"},[a("div",{staticClass:"header-cell--label"},[t._v(t._s(t.libraryData.name))]),t._v(" "),a("div",{staticClass:"header-cell--des"},[t._v(t._s(t.libraryData.description))])])],1):t._e(),t._v(" "),a("div",{staticClass:"main-nav"},[a("div",[a("div",{staticClass:"sec-item home",class:{active:"ContentMain"===t.activeCom},staticStyle:{cursor:"pointer"},on:{click:t.homeClick}},[a("i",{staticClass:"wk wk-enterprise sec-item-icon"}),a("span",{staticClass:"sec-item-label"},[t._v("主页")])]),t._v(" "),a("flexbox",{staticClass:"sec-item catalog-box"},[a("i",{staticClass:"wk wk-catalog sec-item-icon"}),a("div",{staticClass:"sec-item-label sec-item-body"},[t._v("目录")]),t._v(" "),t.canAccess?a("div",[a("el-dropdown",{attrs:{placement:"bottom-start",trigger:"click"},on:{command:t.handleRootCommand}},[a("el-button",{staticClass:"common-text-btn dropdown-btn",attrs:{icon:"el-icon-plus",type:"text"}}),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-tooltip",{attrs:{effect:"dark",content:"创建可在线编辑的文档",placement:"right"}},[a("el-dropdown-item",{attrs:{command:"doc",icon:"wk wk-doc"}},[t._v("\n                      创建文档\n                    ")])],1),t._v(" "),a("el-tooltip",{attrs:{effect:"dark",content:"创建文件夹管理文档与文件",placement:"right"}},[a("el-dropdown-item",{attrs:{command:"folder",icon:"wk wk-folder"}},[t._v("\n                      创建文件夹\n                    ")])],1),t._v(" "),a("el-tooltip",{attrs:{effect:"dark",content:"支持office、pdf、rar、png等格式文件上传并预览",placement:"right"}},[a("el-dropdown-item",{attrs:{command:"upload",icon:"wk wk-upload-simple"}},[t._v("\n                      上传文件\n                    ")])],1)],1)],1)],1):t._e()])],1),t._v(" "),a("div",{staticClass:"catalog"},[a("el-tree",{ref:"catalogTree",attrs:{data:t.treeList,props:t.treeConfig,"default-expanded-keys":[t.currentNodeKey],"current-node-key":t.currentNodeKey,"node-key":"nodeKey"},on:{"node-click":t.handleNodeClick},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.node,n=e.data;return a("flexbox",{staticClass:"catalog-item",attrs:{id:n.nodeKey}},[n.hasOwnProperty("documentId")?3===n.type?a("i",{staticClass:"wk wk-doc"}):a("img",{staticClass:"file-icon",attrs:{src:t.getFileIcon(n.title)}}):a("i",{staticClass:"wk wk-folder"}),t._v(" "),a("flexbox-item",{staticClass:"text-one-line",staticStyle:{width:"0"}},[t._v("\n                "+t._s(i.label)+"\n              ")]),t._v(" "),a("div",[3!=n.currentUserAuth&&t.canAccess?a("el-dropdown",{staticClass:"catalog-item__more",attrs:{placement:"bottom-start",trigger:"click"},on:{command:function(e){t.handleCommand(e,n)}}},[a("el-button",{staticClass:"common-text-btn dropdown-btn",attrs:{icon:"el-icon-more",type:"text"},on:{click:function(t){t.stopPropagation()}}}),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"move"}},[t._v("移动")]),t._v(" "),a("el-dropdown-item",{attrs:{command:t._f("getType")(n)}},[t._v("重命名")]),t._v(" "),a("el-dropdown-item",{attrs:{command:"delete"}},[t._v("删除")])],1)],1):t._e(),t._v(" "),!n.hasOwnProperty("documentId")&&3!=n.currentUserAuth&&t.canAccess?a("el-dropdown",{staticClass:"catalog-item__add",attrs:{placement:"bottom-start",trigger:"click"},on:{command:function(e){t.handleCommand(e,n)}}},[a("el-button",{staticClass:"common-text-btn dropdown-btn",attrs:{icon:"el-icon-plus",type:"text"},on:{click:function(t){t.stopPropagation()}}}),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-tooltip",{attrs:{effect:"dark",content:"创建可在线编辑的文档",placement:"right"}},[a("el-dropdown-item",{attrs:{command:"doc",icon:"wk wk-doc"}},[t._v("\n                        创建文档\n                      ")])],1),t._v(" "),n.hasOwnProperty("documentId")?t._e():a("el-tooltip",{attrs:{effect:"dark",content:"创建文件夹管理文档与文件",placement:"right"}},[a("el-dropdown-item",{attrs:{command:"folder",icon:"wk wk-folder"}},[t._v("\n                        创建文件夹\n                      ")])],1),t._v(" "),n.hasOwnProperty("documentId")?t._e():a("el-tooltip",{attrs:{effect:"dark",content:"支持office、pdf、rar、png等格式文件上传并预览",placement:"right"}},[a("el-dropdown-item",{attrs:{command:"upload",icon:"wk wk-upload-simple"}},[t._v("\n                        上传文件\n                      ")])],1)],1)],1):t._e()],1)],1)}}])})],1),t._v(" "),t.canAccess?a("flexbox",{staticClass:"sec-item recent-delete",class:{active:"ContentDelete"===t.activeCom},staticStyle:{cursor:"pointer"},nativeOn:{click:function(e){return t.checkDeleteClick(e)}}},[a("i",{staticClass:"wk wk-icon-bin"}),t._v(" "),a("flexbox-item",[t._v("最近删除")])],1):t._e()],1)],1),t._v(" "),a("el-main",{key:""+t.refreshKey},["ContentMain"===t.activeCom?a("content-main",{attrs:{id:t.libraryId},on:{update:function(e){t.libraryData=e},next:t.handleNodeClick}}):"ContentFolder"===t.activeCom?a("content-folder",{attrs:{id:t.chooseNodeData.folderId},on:{delete:t.deleteFolderOrDoc,move:t.handleToMove,rename:t.handleToRename,action:t.handleCommand,next:t.handleNodeClick}}):"ContentFile"===t.activeCom?a("content-file",{attrs:{id:t.chooseNodeData.documentId},on:{delete:t.deleteFolderOrDoc,move:t.handleToMove}}):"ContentWord"===t.activeCom?a("content-word",{attrs:{id:t.chooseNodeData.documentId},on:{delete:t.deleteFolderOrDoc,move:t.handleToMove}}):"ContentDelete"===t.activeCom?a("content-delete",{ref:"contentDelete",attrs:{id:t.libraryId},on:{change:t.getFolderTree}}):t._e()],1)],1),t._v(" "),t.showMove?a("move-dialog",{attrs:{data:t.moveItem},on:{close:function(e){t.showMove=!1},update:t.getFolderTree}}):t._e(),t._v(" "),a("el-dialog",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{title:t.dialogTitle,visible:t.dialogVisible,width:"500px"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",[a("el-form-item",{attrs:{label:t.dialogLabel}},[a("el-input",{attrs:{maxlength:50},model:{value:t.folderOrDocName,callback:function(e){t.folderOrDocName="string"===typeof e?e.trim():e},expression:"folderOrDocName"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.createFolderOrDoc()}}},[t._v("保存")]),t._v(" "),a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取消")])],1)],1),t._v(" "),a("input",{ref:"fileHook",staticClass:"file-input",attrs:{accept:"*/*",type:"file"},on:{change:t.handleFileUpload}})],1)},n=[],s=a("ade3"),o=a("5530"),l=(a("b64b"),a("99af"),a("d3b7"),a("159b"),a("ac1f"),a("5319"),a("a9e3"),a("14d9"),a("fb6a"),a("b0c0"),a("caad"),a("b729")),c=a("b775");function r(t){return Object(c["a"])({url:"/kmFolder/queryTreeList",method:"post",data:t})}function d(t){var e=t.folderId?"update":"add";return Object(c["a"])({url:"/kmFolder/"+e,method:"post",headers:{"Content-Type":"application/json;charset=UTF-8"},data:t})}function u(t){return Object(c["a"])({url:"/kmFolder/queryById",method:"post",data:t})}function h(t){return Object(c["a"])({url:"/kmFolder/delete",method:"post",data:t})}function m(t){return Object(c["a"])({url:"/kmFolder/completelyDelete",method:"post",data:t})}function p(t){return Object(c["a"])({url:"/kmFolder/move",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function f(t){var e=t.documentId?"update":"add";return Object(c["a"])({url:"/kmDocument/"+e,method:"post",headers:{"Content-Type":"application/json;charset=UTF-8"},data:t})}function v(t){return Object(c["a"])({url:"/kmDocument/move",method:"post",headers:{"Content-Type":"application/json;charset=UTF-8"},data:t})}function g(t){return Object(c["a"])({url:"/kmDocument/queryById",method:"post",data:t})}function b(t){return Object(c["a"])({url:"/kmDocument/delete",method:"post",data:t})}function y(t){return Object(c["a"])({url:"/kmDocument/completelyDelete",method:"post",data:t})}function C(t){return Object(c["a"])({url:"/kmDocument/favor",method:"post",headers:{"Content-Type":"application/json;charset=UTF-8"},data:t})}var w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"content-main"},[a("wk-page-header",{attrs:{title:t.detailData.name,dropdowns:t.headerDropdowns},on:{command:t.pageHeaderCommand}}),t._v(" "),a("div",{staticClass:"kl-desc"},[t._v(t._s(t.detailData.description||"暂无描述信息"))]),t._v(" "),a("section",{staticClass:"section static"},[a("div",{staticClass:"section-body"},[a("el-tabs",{on:{"tab-click":t.handleChange},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"全部文档",name:"all"}}),t._v(" "),a("el-tab-pane",{attrs:{label:"我关注的",name:"collect"}})],1),t._v(" "),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"},{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.getList,expression:"getList"}],staticClass:"list"},[t._l(t.docList,(function(e,i){return a("flexbox",{key:i,staticClass:"list-item",nativeOn:{click:function(a){t.handleToDetail(e)}}},[2===e.type?a("i",{staticClass:"wk wk-folder file-icon folder"}):3===e.type?a("i",{staticClass:"wk wk-doc file-icon doc"}):a("img",{staticClass:"img-icon",attrs:{src:t.getFileIcon(e.title),alt:""}}),t._v(" "),a("flexbox-item",{staticClass:"list-item__name text-one-line"},[t._v(t._s(e.title)),e.fileSize?a("span",{staticClass:"list-item__info"},[t._v("（"+t._s(t._f("getFileSize")(e.fileSize))+"）")]):t._e()]),t._v(" "),e.aiSyncStatus?a("flexbox-item",{staticClass:"list-item__name text-one-line"},[a("el-tag",{attrs:{type:{1:"",2:"success",3:"danger"}[e.aiSyncStatus]}},[1==e.aiSyncStatus?a("i",{staticClass:"el-icon-loading"}):t._e(),t._v("\n              "+t._s(t.AISyncStatus[e.aiSyncStatus])+"\n            ")])],1):t._e(),t._v(" "),e.createTime?a("span",{staticClass:"list-item__desc"},[t._v("创建于"+t._s(e.createTime))]):t._e(),t._v(" "),a("i",{staticClass:"wk wk-focus-on collect-btn",class:{active:0!=e.collectStatus},on:{click:function(a){a.stopPropagation(),t.handleCollection(e)}}})],1)})),t._v(" "),0===t.docList.length?a("no-data",{attrs:{text:t.tips}}):t._e()],2)],1)]),t._v(" "),t.showEdit?a("edit-dialog",{attrs:{data:t.detailData},on:{close:function(e){t.showEdit=!1},update:function(e){t.getDetail(!0)}}}):t._e()],1)},_=[],k=(a("dca8"),a("ddc5")),D=a("56f7"),x=a("fdca"),I=a("ed08"),T={name:"ContentMain",components:{EditDialog:k["a"],NoData:D["a"],WkPageHeader:x["a"]},filters:{getFileSize:function(t){return Object(I["f"])(Number(t))}},props:{id:{type:[String,Number],required:!0}},data:function(){return{activeTab:"all",showEdit:!1,detailData:{},docList:[],loading:!1,listLoading:!1,page:0,overFlag:!1,AISyncStatus:Object.freeze(["","解析中","解析成功","解析失败"])}},computed:{tips:function(){this.detailData&&this.detailData.currentUserAuth;return"暂无数据"},headerDropdowns:function(){return this.detailData.isEdit?[{command:"manage",name:"设置"},{command:"delete",name:"删除"}]:[]}},created:function(){this.getDetail()},methods:{pageHeaderCommand:function(t){"manage"===t?this.showEdit=!0:"delete"===t&&this.handleDelete()},getDetail:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.loading=!0,Object(l["i"])({libraryId:this.id}).then((function(a){t.loading=!1,t.detailData=a.data,e&&t.$emit("update",t.detailData)})).catch((function(){t.loading=!1}))},getFileIcon:function(t){var e=t.lastIndexOf("."),a=t.slice(e+1);return Object(I["k"])(a)},handleChange:function(){this.page=0,this.overFlag=!1,this.getList()},getList:function(){var t=this;if(!this.overFlag&&!this.listLoading){this.listLoading=!0,this.page++;var e="all"===this.activeTab?l["k"]:l["j"];e({libraryId:this.id,page:this.page}).then((function(e){1===t.page&&(t.docList=[]),t.docList=t.docList.concat(e.data.list||[]),t.overFlag=e.data.lastPage,t.listLoading=!1})).catch((function(){t.listLoading=!1}))}},handleDelete:function(){var t=this;this.$confirm("您确定要删除该知识库和该知识库下的所有文件吗?<br />删除后可在回收站恢复知识库。","提示",{confirmButtonText:"确定",dangerouslyUseHTMLString:!0,cancelButtonText:"取消",type:"warning"}).then((function(){Object(l["g"])(t.id).then((function(){t.$message.success("删除成功!"),t.$router.go(-1)})).catch((function(){}))})).catch((function(){}))},getType:function(t){return t.hasOwnProperty("documentId")?"doc":"folder"},handleCollection:function(t){var e=this,a=this.getType(t),i={type:"folder"===a?2:t.type,typeId:"folder"===a?t.folderId:t.documentId},n=0===t.collectStatus?l["b"]:l["c"];n(i).then((function(){e.$message.success(0===t.collectStatus?"关注成功":"已取消关注"),t.collectStatus=0===t.collectStatus?1:0,e.handleChange()})).catch((function(){}))},handleToDetail:function(t){this.$emit("next",t)}}},S=T,L=(a("4605"),a("2877")),N=Object(L["a"])(S,w,_,!1,null,"45239c0e",null),O=N.exports,U=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"content-container"},[t.detailData?a("flexbox",{staticClass:"main-top"},[a("flexbox-item",{staticClass:"title"},[a("span",[t._v(t._s(t.detailData.title))]),a("span",[t._v(t._s(t.$getUserName(t.detailData.createUser))+"于"+t._s(t.detailData.createTime)+"创建")])]),t._v(" "),a("div",{staticClass:"control"},[1===t.currentUserAuth?a("el-button",{staticClass:"control-btn",attrs:{icon:"wk wk-employees",type:"text"},on:{click:function(e){t.showGroupControl=!t.showGroupControl}}},[t._v("\n        协作\n      ")]):t._e(),t._v(" "),a("el-button",{staticClass:"control-btn",attrs:{icon:0===t.detailData.collectStatus?"wk wk-focus-on":"wk wk-focus-on collected",type:"text"},on:{click:function(e){t.handleCollection(t.detailData)}}},[t._v("\n        "+t._s(0===t.detailData.collectStatus?"关注":"取消关注")+"\n      ")]),t._v(" "),[1,2].includes(t.currentUserAuth)?a("el-dropdown",{attrs:{placement:"bottom-start",trigger:"click"},on:{command:t.handleCommand}},[a("el-button",{staticClass:"dropdown-btn",attrs:{icon:"el-icon-plus"}},[t._v("添加内容")]),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"doc",icon:"wk wk-doc"}},[t._v("\n            创建文档\n          ")]),t._v(" "),a("el-dropdown-item",{attrs:{command:"folder",icon:"wk wk-folder"}},[t._v("\n            创建文件夹\n          ")]),t._v(" "),a("el-dropdown-item",{attrs:{command:"upload",icon:"wk wk-upload-simple"}},[t._v("\n            上传文件\n          ")])],1)],1):t._e(),t._v(" "),1===t.currentUserAuth?a("el-dropdown",{attrs:{trigger:"click"},on:{command:t.handleCommand}},[a("el-button",{staticClass:"dropdown-btn",attrs:{icon:"el-icon-more"}}),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"move"}},[t._v("移动文件夹至")]),t._v(" "),a("el-dropdown-item",{attrs:{command:"deleteAll"}},[t._v("删除")])],1)],1):t._e()],1)],1):t._e(),t._v(" "),t.detailData?a("div",{staticClass:"content-folder"},[a("div",{staticClass:"folder-father"},[t._v(t._s(t.detailData.title||""))]),t._v(" "),a("div",{staticClass:"container"},[a("div",{staticClass:"static"},[t._v("\n        "+t._s(t.detailData.childList.length)+"个文件夹，"+t._s(t.detailData.kmDocumentList.length)+"个文档\n      ")]),t._v(" "),a("ul",{staticClass:"list"},t._l(t.contentList,(function(e,i){return a("li",{key:i,staticClass:"list-item",on:{click:function(a){t.$emit("next",e)}}},[a("flexbox",{attrs:{align:"center",justify:"flex-start"}},[e.hasOwnProperty("documentId")?3===e.type?a("i",{staticClass:"wk wk-doc file-icon doc"}):a("img",{staticClass:"img-icon",attrs:{src:t.getFileIcon(e.title),alt:""}}):a("i",{staticClass:"wk wk-folder file-icon folder"}),t._v(" "),a("flexbox-item",{staticClass:"list-item__name"},[t._v(t._s(e.title))]),t._v(" "),e.createTime?a("span",{staticClass:"list-item__desc"},[t._v("创建于"+t._s(e.createTime))]):t._e(),t._v(" "),a("i",{staticClass:"wk wk-focus-on collect-btn",class:{active:0!=e.collectStatus},on:{click:function(a){a.stopPropagation(),t.handleCollection(e)}}}),t._v(" "),1===t.currentUserAuth?a("div",{on:{click:function(a){a.stopPropagation(),t.chooseNodeData=e}}},[a("el-dropdown",{staticClass:"list-item__control",attrs:{trigger:"hover"},on:{command:t.handleCommand}},[a("el-button",{attrs:{icon:"el-icon-more",type:"text"}}),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"rename"}},[t._v("重命名")]),t._v(" "),a("el-dropdown-item",{attrs:{command:"delete"}},[t._v("删除")])],1)],1)],1):t._e()],1)],1)})))])]):t._e(),t._v(" "),t.showGroupControl?a("group-control",{attrs:{data:t.detailData},on:{close:function(e){t.showGroupControl=!1},update:t.getDetail}}):t._e()],1)},j=[],A=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"slide-fade"}},[t.showContent?a("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"},{name:"clickoutside",rawName:"v-clickoutside",value:t.handleClose,expression:"handleClose"}],ref:"slide",staticClass:"slide-wrapper",style:{"z-index":t.zIndex},attrs:{id:"slide","body-style":{padding:"15px"}}},[a("div",{staticClass:"slider-body"},[a("div",{staticClass:"section"},[a("flexbox",{staticClass:"section-title"},[a("flexbox-item",{staticClass:"name"},[t._v("文档权限")]),a("i",{staticClass:"el-icon-close close",on:{click:t.handleClose}})],1),t._v(" "),a("div",{staticClass:"section-body"},[a("div",{staticClass:"open-option"},[a("div",{staticClass:"open"},[a("div",{staticClass:"mini-title"},[a("i",{staticClass:"wk wk-unlock"}),t._v(" "),a("span",[t._v("公开")])]),t._v(" "),a("div",{staticClass:"desc"},[t._v("\n                当前知识库成员及可访问当前知识库的人\n              ")]),t._v(" "),a("el-radio-group",{on:{change:function(e){t.handleChangeOpen(1)}},model:{value:t.authData.openAuth,callback:function(e){t.$set(t.authData,"openAuth",e)},expression:"authData.openAuth"}},[t._l(t.openAuthList,(function(e,i){return a("el-radio",{key:i,staticStyle:{display:"flex"},attrs:{label:e.value}},[a("div",{staticClass:"el-radio-container"},[a("span",[t._v(t._s(e.label))]),t._v(" "),a("span",[t._v(t._s(e.desc))])])])})),t._v(" "),a("el-checkbox",{staticClass:"mobile-checkbox",attrs:{label:"手机端仅查看","true-label":1,"false-label":0},on:{change:t.updateAuth},model:{value:t.authData.isMobile,callback:function(e){t.$set(t.authData,"isMobile",e)},expression:"authData.isMobile"}})],2)],1),t._v(" "),a("flexbox",{staticClass:"self",nativeOn:{click:function(e){t.handleChangeOpen(0)}}},[a("i",{staticClass:"wk wk-lock"}),t._v(" "),a("flexbox-item",[t._v("仅自己和被添加的成员可见（隐私）")]),t._v(" "),0===t.authData.isOpen?a("i",{staticClass:"el-icon-check"}):t._e()],1)],1)])],1),t._v(" "),a("div",{staticClass:"section is-users"},[a("flexbox",{staticClass:"section-title",attrs:{align:"center"}},[a("flexbox-item",{staticClass:"name"},[t._v("协作者")]),t._v(" "),a("el-button",{attrs:{icon:"el-icon-plus",type:"text"},on:{click:t.addUserClick}},[t._v("\n            添加成员\n          ")])],1),t._v(" "),t.data?a("div",{staticClass:"section-body"},[t._l(t.authUser,(function(e,i){return a("flexbox",{key:i,staticClass:"user-item",attrs:{align:"center"}},[a("xr-avatar",{staticClass:"user-img",attrs:{name:t.$getUserName(e),size:32,src:e.img}}),t._v(" "),a("flexbox-item",[t._v("\n              "+t._s(t.$getUserName(e))+"\n            ")]),t._v(" "),a("el-dropdown",{attrs:{trigger:"click"},on:{command:function(e){t.handleChangeUserAuth(i,e)}}},[a("el-button",{staticClass:"dropdown-btn",class:{disabled:e.userId==t.data.createUserId},attrs:{type:"text",disabled:e.userId==t.data.createUserId}},[t._v("\n                "+t._s(e.userId==t.data.createUserId?"拥有者":t.roleObj[e.auth])+"\n                "),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t._l(t.memberAuthList,(function(e,i){return a("el-dropdown-item",{key:i,attrs:{command:e.value}},[a("div",{staticStyle:{display:"flex","flex-direction":"column"}},[a("span",[t._v(t._s(e.label))]),t._v(" "),a("span",{staticStyle:{"line-height":"25px",color:"#7a869a"}},[t._v(t._s(e.desc))])])])})),t._v(" "),a("el-dropdown-item",[a("el-checkbox",{attrs:{label:"手机端仅查看","true-label":1,"false-label":0},model:{value:e.isMobile,callback:function(a){t.$set(e,"isMobile",a)},expression:"user.isMobile"}})],1)],2)],1)],1)})),t._v(" "),a("el-tree",{staticClass:"group-dept",attrs:{data:t.showDeptTreeList,props:{label:"name",children:"childrenList"},"node-key":"deptId"},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.data;return a("div",{staticClass:"group-dept-tree"},[a("xr-avatar",{staticClass:"user-img",attrs:{name:i.deptName,size:32}}),t._v("\n              "+t._s(i.deptName||i.name)+"\n\n              "),a("div",{staticStyle:{"margin-left":"auto"},on:{click:function(t){t.stopPropagation()}}},[a("el-dropdown",{attrs:{trigger:"click"},on:{command:function(e){t.handleDeptTreeCommand(e,i.deptId)}}},[a("el-button",{staticClass:"dropdown-btn",attrs:{type:"text"}},[t._v("\n                    "+t._s(t.roleObj[i.auth])+"\n                    "),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t._l(t.memberAuthList,(function(e,i){return a("el-dropdown-item",{key:i,attrs:{command:e.value}},[a("div",{staticStyle:{display:"flex","flex-direction":"column"}},[a("span",[t._v(t._s(e.label))]),t._v(" "),a("span",{staticStyle:{"line-height":"25px",color:"#7a869a"}},[t._v(t._s(e.desc))])])])})),t._v(" "),a("el-dropdown-item",[a("el-checkbox",{attrs:{label:"手机端仅查看","true-label":1,"false-label":0},model:{value:i.isMobile,callback:function(e){t.$set(i,"isMobile",e)},expression:"data.isMobile"}})],1)],2)],1)],1)],1)}}])})],2):t._e()],1)]),t._v(" "),t.selectEmployeeShow?a("wk-dep-user-dialog",{attrs:{"user-value":(t.authUser||[]).map((function(t){return t.userId})),"dep-value":(t.authDept||[]).map((function(t){return t.deptId})),props:{showUser:!t.authUserList,customDeptList:t.authDeptList,showDisableUser:!!t.authUserList,disableUserList:t.authUserList,disableUserLabel:"员工",showDept:!0,showSubDeptContain:!0},"sub-dept-contain":t.isNeedChild,visible:t.selectEmployeeShow},on:{"update:subDeptContain":function(e){t.isNeedChild=e},"update:visible":function(e){t.selectEmployeeShow=e},change:t.userSelectChange},nativeOn:{click:function(t){t.stopPropagation()}}}):t._e()],1):t._e()],1)},F=[],$=a("c7eb"),E=a("1da1"),R=(a("c740"),a("a434"),a("3c65"),a("4de4"),a("7db0"),a("d81d"),a("cb29"),a("2532"),a("2581")),P=a("2f62"),M={name:"GroupControl",components:{WkDepUserDialog:R["a"]},props:{data:{type:Object,required:!0}},data:function(){return{zIndex:Object(I["n"])(),drawerVisible:!0,authList:[{label:"所有权限",desc:"可编辑，可以进行管理",value:1},{label:"编辑权限",desc:"可以进行编辑",value:2},{label:"只读权限",desc:"仅阅读，不可编辑",value:3},{label:"移出",desc:"",value:4}],memberAuthList:[{label:"管理员",desc:"当前知识库所有权限",value:1},{label:"可编辑",desc:"可上传/下载/编辑/查看/删除文件",value:2},{label:"可上传下载",desc:"可上传/下载/编辑/查看，不可删除文件",value:5},{label:"可下载",desc:"可下载/查看，不可上传文件",value:4},{label:"仅预览",desc:"仅可在线预览，不可下载文件",value:3},{label:"移出",desc:"",value:-1}],openAuthList:[{label:"管理员",desc:"当前知识库所有权限",value:4},{label:"可编辑",desc:"可上传/下载/编辑/查看/删除文件",value:2},{label:"可上传下载",desc:"可上传/下载/编辑/查看，不可删除文件",value:5},{label:"可下载",desc:"可下载/查看，不可上传文件",value:6},{label:"仅预览",desc:"仅可在线预览，不可下载文件",value:3}],roleObj:{1:"管理员",2:"可编辑",3:"仅预览",4:"可下载",5:"可上传下载"},popoverList:[],isNeedChild:0,authUser:[],authDept:[],authData:{},selectEmployeeShow:!1,authUserRequest:l["l"],authUserParams:{},authUserList:null,authDeptList:null,loading:!1,updateFlag:!1,ownerUser:null,showContent:!1}},computed:Object(o["a"])(Object(o["a"])({},Object(P["b"])(["userInfo"])),{},{showDeptTreeList:function(){var t=function(t){for(var e={},a=[],i=0;i<t.length;i+=1)e[t[i].deptId]=i,t[i].childrenList=[];for(var n=0;n<t.length;n+=1){var s=t[n];"0"!==s.parentDeptId&&void 0!==e[s.parentDeptId]?t[e[s.parentDeptId]].childrenList.push(s):a.push(s)}return a};return t(this.authDept)}}),watch:{data:{handler:function(){var t=this;this.authData=this.data.auth;var e=Object(I["w"])(this.data.auth.authUserList||[]),a=e.findIndex((function(e){return e.userId==t.data.createUserId}));-1!==a&&(this.ownerUser=e.splice(a,1)[0]),this.ownerUser&&e.unshift(this.ownerUser),this.authUser=e.filter((function(t){return t.userId})),this.authDept=e.filter((function(t){return t.deptId})),this.authUserParams={libraryId:this.data.libraryId},0==this.data.libraryIsOpen?this.authUserRequest=l["l"]:this.authUserRequest=null},deep:!0,immediate:!0}},mounted:function(){var t=this;setTimeout((function(){t.showContent=!0}),50)},methods:{getAuthText:function(t){var e=this.authList.find((function(e){return e.value===t.auth}));return e.label},addUserClick:function(){var t=this;return Object(E["a"])(Object($["a"])().mark((function e(){var a,i;return Object($["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.authUserRequest){e.next=10;break}return e.next=3,t.authUserRequest(t.authUserParams);case 3:a=e.sent,t.authUserList=a.data.filter((function(t){return!t.type}))||[],i=function(t){for(var e={},a=[],i=0;i<t.length;i+=1)e[t[i].deptId]=i,t[i].children=[];for(var n=0;n<t.length;n+=1){var s=t[n];"0"!==s.parentDeptId&&void 0!=e[s.parentDeptId]?t[e[s.parentDeptId]].children.push(s):a.push(s)}return a},t.authDeptList=i(a.data.map((function(t){return Object(o["a"])(Object(o["a"])({},t),{},{name:t.deptName})}))||[]),t.selectEmployeeShow=!0,e.next=12;break;case 10:t.authUserList=null,t.selectEmployeeShow=!0;case 12:case"end":return e.stop()}}),e)})))()},userSelectChange:function(t,e,a,i){var n=this;this.ownerUser&&(this.authUser=[this.ownerUser]),this.authDept=[],a.forEach((function(t){n.ownerUser&&t.userId==n.ownerUser.userId||(t.hasOwnProperty("auth")?n.authUser.push(t):n.authUser.push(Object(o["a"])(Object(o["a"])({},t),{},{isMobile:1,auth:3})))}));var s=[];this.isNeedChild?this.handleIncludeSubsDept(i,s):s=i,s.forEach((function(t){n.authDept.push(Object(o["a"])(Object(o["a"])({},t),{},{parentDeptId:t.parentId,deptName:t.name,isMobile:1,auth:3}))})),this.popoverList=new Array(this.authUser.length).fill(!1),this.updateAuth()},handleIncludeSubsDept:function(t,e){var a=this,i=e.map((function(t){return t.deptId}));t.forEach((function(t){i.includes(t.deptId)||e.push(t),t.children&&t.children.length&&a.handleIncludeSubsDept(t.children,e)}))},handleChangeOpen:function(t){this.authData.isOpen=t,0===t&&(this.authData.openAuth=0),this.updateAuth()},handleChangeUserAuth:function(t,e){-1===e?(this.authUser.splice(t,1),this.popoverList.splice(t,1)):e?this.authUser[t].auth=e||3:this.authUser[t].isMobile=!this.authUser[t].isMobile,this.popoverList[t]=!1,this.updateAuth()},handleDeptTreeCommand:function(t,e){var a=this.authDept.filter((function(t){return t.deptId==e}))[0];t||(a.isMobile=!a.isMobile),-1!==t?a.auth=t:this.authDept=this.authDept.filter((function(t){return t.deptId!=e})),this.updateAuth()},updateAuth:function(){var t=this;this.loading||(this.loading=!0,Object(l["a"])({auth:{isOpen:this.authData.isOpen,openAuth:this.authData.openAuth,authId:this.data.authId,isMobile:this.authData.isMobile},authUserList:this.authUser.map((function(t){return{userId:t.userId,auth:t.auth||3,isMobile:Number(t.isMobile)}})).concat(this.authDept.map((function(t){return{deptId:t.deptId,auth:t.auth||3,isMobile:Number(t.isMobile)}}))),createUserId:this.data.createUserId,folderId:this.data.folderId,documentId:this.data.hasOwnProperty("documentId")?this.data.documentId:null}).then((function(){t.loading=!1,t.$emit("update"),t.updateFlag=!0})).catch((function(){t.loading=!1})))},handleClose:function(){this.updateFlag&&this.$emit("update"),this.$emit("close")}}},B=M,K=(a("5c68"),Object(L["a"])(B,A,F,!1,null,"19945d72",null)),z=K.exports,V={name:"ContentFolder",components:{GroupControl:z},props:{id:{type:[String,Number],required:!0}},data:function(){return{loading:!1,detailData:null,chooseNodeData:null,showGroupControl:!1}},computed:{contentList:function(){return this.detailData?this.detailData.childList.concat(this.detailData.kmDocumentList):[]},currentUserAuth:function(){return Number(this.detailData.auth.currentUserAuth)}},watch:{id:{handler:function(t){this.id&&this.id>0&&this.getDetail()},immediate:!0,deep:!0}},methods:{getDetail:function(){var t=this;this.loading=!0,u({folderId:this.id}).then((function(e){t.loading=!1,t.detailData=e.data})).catch((function(){t.loading=!1}))},getFileIcon:function(t){var e=t.lastIndexOf("."),a=t.slice(e+1);return Object(I["k"])(a)},getType:function(t){return t.hasOwnProperty("documentId")?"doc":"folder"},handleCommand:function(t){if(["doc","folder","upload"].includes(t))this.$emit("action",t,this.detailData);else switch(t){case"delete":this.$emit("delete",this.chooseNodeData);break;case"deleteAll":this.$emit("delete",this.detailData);break;case"move":this.$emit("move",this.detailData);break;case"rename":this.$emit("rename",this.getType(this.chooseNodeData),this.chooseNodeData)}},handleCollection:function(t){var e=this,a=this.getType(t),i={type:"folder"===a?2:t.type,typeId:"folder"===a?t.folderId:t.documentId},n=0===t.collectStatus?l["b"]:l["c"];n(i).then((function(){e.$message.success(0===t.collectStatus?"关注成功":"已取消关注"),t.collectStatus=0===t.collectStatus?1:0,e.getDetail()})).catch((function(){}))}}},q=V,G=(a("0a82"),Object(L["a"])(q,U,j,!1,null,"3becee01",null)),H=G.exports,Q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"content-container"},[t.canAccess&&t.detailData?a("flexbox",{staticClass:"main-top"},[a("flexbox-item",{staticClass:"title"},[a("span",[t._v(t._s(t.detailData.title))]),a("span",[t._v(t._s(t.$getUserName(t.detailData.createUser))+"于"+t._s(t.detailData.createTime)+"创建")])]),t._v(" "),a("div",{staticClass:"control"},[1===t.currentUserAuth?a("el-button",{staticClass:"control-btn",attrs:{icon:"wk wk-employees",type:"text"},on:{click:function(e){t.showGroupControl=!t.showGroupControl}}},[t._v("\n        协作\n      ")]):t._e(),t._v(" "),a("el-button",{staticClass:"control-btn",attrs:{icon:0===t.detailData.collectStatus?"wk wk-focus-on":"wk wk-focus-on collected",type:"text"},on:{click:t.handleCollection}},[t._v("\n        "+t._s(0===t.detailData.collectStatus?"关注":"取消关注")+"\n      ")]),t._v(" "),1===t.currentUserAuth?a("el-dropdown",{attrs:{trigger:"click"},on:{command:t.handleCommand}},[a("el-button",{staticClass:"dropdown-btn",attrs:{icon:"el-icon-more"}}),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"move"}},[t._v("移动文件至")]),t._v(" "),a("el-dropdown-item",{attrs:{command:"delete"}},[t._v("删除")])],1)],1):t._e()],1)],1):t._e(),t._v(" "),t.canAccess?a("div",{staticClass:"content-file"},[a("flexbox",{staticClass:"doc-title"},[a("flexbox-item",{staticClass:"text-one-line"},[t._v("\n        "+t._s(t.detailData.title)),t.detailData.fileSize?a("span",{staticClass:"doc-des"},[t._v("（"+t._s(t._f("getFileSize")(t.detailData.fileSize))+"）")]):t._e()]),t._v(" "),(t.canPreview||t.isImg)&&3!=t.currentUserAuth?a("el-button",{attrs:{type:"primary"},on:{click:t.handleDownloadFile}},[t._v("\n        下载文件\n      ")]):t._e()],1),t._v(" "),t.isImg?a("div",{staticClass:"img-view",style:{height:t.editHeight+"px"}},[a("img",{directives:[{name:"src",rawName:"v-src",value:t.docContent,expression:"docContent"}],attrs:{alt:""}})]):t.docContent?a("iframe",{staticClass:"preview-file",staticStyle:{width:"100%"},style:{height:t.editHeight+"px"},attrs:{src:t.getPreviewUrl(t.docContent,t.detailData.title),frameborder:"0"}}):t._e()],1):t._e(),t._v(" "),t.canAccess?t._e():a("no-data"),t._v(" "),t.showGroupControl?a("group-control",{attrs:{data:t.detailData},on:{close:function(e){t.showGroupControl=!1},update:t.getDetail}}):t._e()],1)},Z=[],J={name:"ContentFile",components:{GroupControl:z,NoData:D["a"]},filters:{getFileSize:function(t){return Object(I["f"])(Number(t))}},props:{id:{type:[String,Number],required:!0}},data:function(){return{docContent:"",editHeight:document.documentElement.clientHeight-200,detailData:null,loading:!1,timer:null,showGroupControl:!1}},computed:{isImg:function(){if(!this.detailData||3===this.detailData.type)return!1;var t=["jpg","png","jpeg","gif"],e=this.detailData.title.lastIndexOf(".");if(-1===e)return!1;var a=this.detailData.title.slice(e+1);return t.includes(a)},currentUserAuth:function(){return Number(this.detailData.auth.currentUserAuth)},canAccess:function(){return this.detailData&&this.detailData.currentUserAuth>0},canPreview:function(){var t=this.detailData.title;return Object(I["a"])(t)}},watch:{id:{handler:function(){this.showGroupControl=!1,this.getDetail()},deep:!0,immediate:!0}},methods:{getPreviewUrl:function(t,e){return Object(I["E"])(t,e)},getDetail:function(){var t=this;this.id&&(this.loading=!0,g({documentId:this.id}).then((function(e){t.loading=!1,t.detailData=null,t.docContent=null,t.$nextTick((function(){t.detailData=e.data,t.docContent=e.data.content||""}))})).catch((function(){t.loading=!1})))},handleDownloadFile:function(){Object(I["d"])({path:this.detailData.content,name:this.detailData.title})},handleCommand:function(t){switch(t){case"delete":this.$emit("delete",this.detailData);break;case"move":this.$emit("move",this.detailData);break}},handleCollection:function(){var t=this,e=0===this.detailData.collectStatus?l["b"]:l["c"];e({type:this.detailData.type,typeId:this.detailData.documentId}).then((function(){t.$message.success(0===t.detailData.collectStatus?"关注成功":"已取消关注"),t.detailData.collectStatus=0===t.detailData.collectStatus?1:0})).catch((function(){}))}}},Y=J,W=(a("70b6"),Object(L["a"])(Y,Q,Z,!1,null,"2e6befd1",null)),X=W.exports,tt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"content-container"},[t.canAccess&&t.detailData?i("flexbox",{staticClass:"main-top"},[i("flexbox-item",{staticClass:"title"},[i("span",[t._v(t._s(t.detailData.title))]),i("span",[t._v(t._s(t.$getUserName(t.detailData.createUser))+"于"+t._s(t.detailData.createTime)+"创建")])]),t._v(" "),i("div",{staticClass:"control"},[[1,2,5].includes(t.currentUserAuth)?i("el-button",{staticClass:"control-btn",attrs:{icon:"wk wk-edit",type:"text"},on:{click:function(e){t.isEdit=!t.isEdit}}},[t._v("\n        编辑\n      ")]):t._e(),t._v(" "),1===t.currentUserAuth?i("el-button",{staticClass:"control-btn",attrs:{icon:"wk wk-employees",type:"text"},on:{click:function(e){t.showGroupControl=!t.showGroupControl}}},[t._v("\n        协作\n      ")]):t._e(),t._v(" "),i("el-button",{staticClass:"control-btn",attrs:{icon:0===t.detailData.collectStatus?"wk wk-focus-on":"wk wk-focus-on collected",type:"text"},on:{click:t.handleCollection}},[t._v("\n        "+t._s(0===t.detailData.collectStatus?"关注":"取消关注")+"\n      ")]),t._v(" "),i("el-popover",{attrs:{placement:"bottom",width:"300",trigger:"click","popper-class":"no-padding-popover"}},[t.detailData.share?i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.shareLoading,expression:"shareLoading"}],staticClass:"share-container"},[i("div",{staticClass:"section"},[i("div",{staticClass:"share-title"},[t._v("\n              分享链接文档\n            ")]),t._v(" "),i("div",{staticClass:"share-title-desc"},[t._v("\n              分享开启后，任何人都可以通过公开链接的方式，查询当前文档的内容\n            ")]),t._v(" "),i("flexbox",{staticClass:"qrcode-wrapper",attrs:{align:"center",justify:"center",direction:"column"}},[i("qrcode",{staticClass:"qrcode",attrs:{value:t.shareUrl,options:t.qrcodeOption}}),t._v(" "),i("span",{staticClass:"qrcode-desc"},[t._v("\n                使用手机扫描二维码即可在手机上查看\n              ")])],1),t._v(" "),i("el-input",{staticClass:"link-input",attrs:{value:t.shareUrl,disabled:""}},[i("el-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.shareUrl,expression:"shareUrl",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.clipboardSuccess,expression:"clipboardSuccess",arg:"success"}],attrs:{slot:"append"},slot:"append"},[t._v("\n                复制链接\n              ")])],1)],1),t._v(" "),i("div",{staticClass:"section"},[i("div",{staticClass:"share-title"},[t._v("\n              分享给团队成员\n            ")]),t._v(" "),i("flexbox",{staticClass:"user-select"},[i("wk-user-dialog-select",{staticStyle:{flex:"1"},attrs:{radio:!1},model:{value:t.shareUserList,callback:function(e){t.shareUserList=e},expression:"shareUserList"}}),t._v(" "),i("div",{staticClass:"user-select__append"},[i("el-button",{on:{click:t.shareMemberClick}},[t._v("\n                  立即分享\n                ")])],1)],1)],1),t._v(" "),i("el-button",{staticClass:"share-control",attrs:{type:"primary"},on:{click:function(e){t.shareClick("close")}}},[t._v("\n            关闭分享\n          ")]),t._v(" "),i("div",{staticClass:"desc"},[t._v("\n            关闭分享后已分享链接将失效，重新打开分享将生成新的二维码链接\n          ")])],1):i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.shareLoading,expression:"shareLoading"}],staticClass:"share-container"},[i("div",{staticClass:"section"},[i("div",{staticClass:"share-title"},[t._v("\n              分享链接文档\n            ")]),t._v(" "),i("img",{staticClass:"share-image",attrs:{src:a("9d2c"),alt:""}}),t._v(" "),i("div",{staticClass:"share-title-desc",staticStyle:{"margin-bottom":"16px"}},[t._v("\n              分享开启后，任何人都可以通过公开链接的方式，查询当前文档的内容\n            ")])]),t._v(" "),i("el-button",{staticClass:"share-control",staticStyle:{"margin-bottom":"16px"},attrs:{type:"primary"},on:{click:function(e){t.shareClick("open")}}},[t._v("\n            开启分享\n          ")])],1),t._v(" "),i("el-button",{staticClass:"margin-left-interval",attrs:{slot:"reference",type:"primary"},slot:"reference"},[t._v("\n          分享\n        ")])],1),t._v(" "),1===t.currentUserAuth?i("el-dropdown",{attrs:{trigger:"click"},on:{command:t.handleCommand}},[i("el-button",{staticClass:"dropdown-btn",attrs:{icon:"el-icon-more"}}),t._v(" "),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",{attrs:{command:"move"}},[t._v("移动文档至")]),t._v(" "),i("el-dropdown-item",{attrs:{command:"delete"}},[t._v("删除")])],1)],1):t._e()],1)],1):t._e(),t._v(" "),t.canAccess?i("div",{staticClass:"content-body"},[i("div",{staticClass:"content"},[t.detailData?[t.detailData.content?t._e():i("div",{staticClass:"empty"},[t._v("\n          这个文档是空的\n        ")]),t._v(" "),i("tinymce",{ref:"createTinymce",staticClass:"rich-txt",attrs:{value:t.detailData.content,toolbar:[],plugins:[],init:t.getEditConfig()}})]:t._e()],2),t._v(" "),t.detailData?i("flexbox",{staticClass:"praise-wrapper",attrs:{align:"center",justify:"flex-start"}},[i("flexbox-item",[i("el-button",{staticClass:"control-btn",class:{active:Boolean(t.detailData.faverStatus)},attrs:{type:"text",icon:"wk wk-good"},on:{click:t.handleStar}},[t._v("\n          赞\n        ")]),t._v(" "),i("span",{staticClass:"desc"},[t._v(t._s(t.starStr))])],1),t._v(" "),i("ul",{staticClass:"label-list"},[t._l(t.detailData.labelList,(function(e,a){return i("li",{key:a,staticClass:"label-list-item",style:{backgroundColor:e.color},on:{click:function(a){t.handleToFilter(e.labelId)}}},[t._v("\n          "+t._s(e.name)+"\n        ")])})),t._v(" "),t.detailData.labelList&&t.detailData.labelList.length>0?i("span",{staticClass:"wk wk-label icon"}):t._e()],2)],1):t._e(),t._v(" "),t.showReply?i("div",{staticClass:"comment-wrapper"},[i("div",{staticClass:"comment-title"},[t._v("\n        "+t._s(t.replyTotal>0?t.replyTotal+"条评论":"暂无评论")+"\n      ")]),t._v(" "),i("reply-comment",{directives:[{name:"loading",rawName:"v-loading",value:t.commentLoading,expression:"commentLoading"}],ref:"f_reply",on:{toggle:t.closeOtherReply,reply:t.handleReply}}),t._v(" "),t.replyList.length>0?i("comment-list",{ref:"comment_list",attrs:{props:t.commentListProps,list:t.replyList},on:{delete:t.deleteComment,"close-other-reply":function(e){t.$refs.f_reply.toggleFocus(!0)}}}):t._e()],1):t._e()],1):t._e(),t._v(" "),t.canAccess?t._e():i("no-data"),t._v(" "),t.showGroupControl?i("group-control",{attrs:{data:t.detailData},on:{close:function(e){t.showGroupControl=!1},update:t.getDetail}}):t._e(),t._v(" "),t.isEdit?i("edit-document",{attrs:{data:t.detailData},on:{back:function(e){t.isEdit=!t.isEdit},update:t.getDetail}}):t._e()],1)},et=[];a("a15b");function at(t){return Object(c["a"])({url:"workTaskComment/setComment",method:"post",data:t,headers:{"Content-Type":"application/json;charset=UTF-8"}})}function it(t){return Object(c["a"])({url:"workTaskComment/deleteComment",method:"post",data:t})}function nt(t){return Object(c["a"])({url:"workTaskComment/queryCommentList",method:"post",data:t})}var st=a("8256"),ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.commentLoading,expression:"commentLoading"}],staticClass:"reply-comment"},[t.showNoFocus?a("div",{staticClass:"no-focus",on:{click:function(e){t.toggleFocus()}}},[t._v("\n    请输入评论内容\n  ")]):["text"===t.config.contentType?a("el-input",{attrs:{rows:t.config.rows||3,maxlength:2e3,"show-word-limit":"",type:"textarea",placeholder:"请输入评论内容"},on:{blur:t.blurFun},model:{value:t.commentsTextarea,callback:function(e){t.commentsTextarea=e},expression:"commentsTextarea"}}):"rich"===t.config.contentType?a("tinymce",{ref:"editor",attrs:{height:200,init:t.tinymceInit},on:{onClick:t.tinyClick},model:{value:t.commentsTextarea,callback:function(e){t.commentsTextarea=e},expression:"commentsTextarea"}}):t._e(),t._v(" "),a("div",{staticClass:"btn-group"},[a("div",{staticClass:"btn-box"},[a("el-button",{attrs:{type:"primary"},on:{click:t.commentSubmit}},[t._v("评论")]),t._v(" "),a("el-button",{on:{click:t.closeComment}},[t._v("取消")])],1)])],t._v(" "),t.moduleSelectShow?a("module-select",{ref:"moduleSelect",style:t.moduleSelectStyle,attrs:{search:t.moduleSelectSearch,props:{showUser:!0}},on:{close:function(e){t.moduleSelectShow=!1},change:t.moduleSelectChange}}):t._e(),t._v(" "),t.moduleTypeSelectShow?a("module-type-select",{ref:"moduleTypeSelect",style:t.moduleSelectStyle,attrs:{search:t.moduleSelectSearch},on:{close:function(e){t.moduleTypeSelectShow=!1},change:t.moduleTypeSelectChange}}):t._e()],2)},lt=[],ct=a("2909"),rt=(a("a630"),a("3ca3"),a("2ca0"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-card",{staticClass:"module-select-wrap",attrs:{"body-style":{padding:"8px",height:"100%"}}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"module-select"},[a("div",{staticClass:"module-select-header"},[a("el-tabs",{attrs:{"nav-mode":"more"},on:{"tab-click":t.tabClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},t._l(t.tabs,(function(t){return a("el-tab-pane",{key:t.value,attrs:{label:t.label,name:t.value,lazy:""}})})))],1),t._v(" "),a("div",{staticClass:"module-select-body"},t._l(t.list,(function(e,i){return a("flexbox",{key:i,staticClass:"cell",class:{"is-select":t.selectIndex===i},nativeOn:{click:function(e){t.selectClick(i)},mouseenter:function(e){t.selectIndex=i}}},[a("div",{staticClass:"cell-label text-one-line"},[t._v(t._s(e[t.tabConfig.nameKey]))]),t._v(" "),a("div",{staticClass:"cell-value"},[t._v(t._s(e.ownerUserName))])])}))),t._v(" "),a("div",{staticClass:"module-select-footer"},[a("el-button",{attrs:{type:"primary-text"},on:{click:t.showListClick}},[t._v("从列表选择")])],1)]),t._v(" "),t.showRelatePopover?a("crm-relative",{ref:"crmrelative",attrs:{visible:t.showRelatePopover,radio:!1,"show-types":["customer","contacts","business","contract","receivables"]},on:{"update:visible":function(e){t.showRelatePopover=e},close:function(e){t.showRelatePopover=!1},changeCheckout:t.relateDataChange}}):t._e(),t._v(" "),t.userDialogSelectVisible?a("wk-dep-user-dialog",{attrs:{visible:t.userDialogSelectVisible,props:{showDept:!1}},on:{"update:visible":function(e){t.userDialogSelectVisible=e},change:t.selectUserChange}}):t._e()],1)}),dt=[],ut=(a("841c"),a("2934")),ht=a("ec3a"),mt=a("0007"),pt=a("1112"),ft=a("77dc"),vt=a("d43a"),gt=a("9a4b"),bt=a("7a1a"),yt=a("8ed6"),Ct={showUser:!1},wt={name:"ModuleSelect",components:{WkDepUserDialog:R["a"],CrmRelative:gt["default"]},props:{props:{type:Object,default:function(){}},search:String},data:function(){return{loading:!1,activeName:"customer",selectIndex:-1,list:[],showRelatePopover:!1,userDialogSelectVisible:!1}},computed:{config:function(){return Object(yt["a"])(Object(o["a"])({},Ct),this.props||{})},tabs:function(){var t=[{label:"客户",value:"customer",request:ht["d"],nameKey:"customerName"},{label:"联系人",value:"contacts",request:mt["d"],nameKey:"name"},{label:"商机",value:"business",request:pt["d"],nameKey:"businessName"},{label:"合同",value:"contract",request:ft["d"],nameKey:"num"},{label:"回款",value:"receivables",request:vt["d"],nameKey:"number"}];return this.config.showUser&&t.unshift({label:"员工",value:"user",request:ut["h"],nameKey:"realname"}),t},tabConfig:function(){var t=this;return this.tabs.find((function(e){return e.value===t.activeName}))}},watch:{search:function(){this.debounceGetList()}},created:function(){this.activeName=this.tabs[0].value,this.debounceGetList=Object(bt["debounce"])(300,this.getList),this.debounceGetList(),document.addEventListener("keyup",this.keyDownHandler)},mounted:function(){},beforeDestroy:function(){document.removeEventListener("keyup",this.keyDownHandler)},methods:{keyDownHandler:function(t){"Escape"===t.code?this.close():"ArrowDown"===t.code?this.selectIndex<this.list.length-1&&this.selectIndex++:"ArrowUp"===t.code?this.selectIndex>0&&this.selectIndex--:"Enter"===t.code&&this.selectClick(this.selectIndex)},selectClick:function(t){if(this.selectIndex=t,this.selectIndex>=0){var e=this.list[this.selectIndex];e.name=e[this.tabConfig.nameKey],e.id=e["".concat(this.tabConfig.value,"Id")],e.type=this.activeName,this.$emit("change",e,{multiple:!1,type:this.activeName}),this.$emit("close")}},close:function(){this.$emit("close")},tabClick:function(){this.getList()},getList:function(){var t=this;this.loading=!0;var e={page:1,limit:10,search:this.search||""};this.config.showUser&&(e.realname=e.search,delete e.search),this.tabConfig.request(e).then((function(e){t.list=e.data.list,t.selectIndex=t.list.length>0?0:-1,t.loading=!1})).catch((function(){t.loading=!1}))},showListClick:function(){"user"===this.activeName?this.userDialogSelectVisible=!0:this.showRelatePopover=!0},selectUserChange:function(t,e,a){this.relateDataChange({data:{user:a}})},relateDataChange:function(t){for(var e=this,a=t.data,i={},n=function(){var t=e.tabs[s],n=a[t.value];if(n&&n.length>0){var o=n.map((function(e){return e.name=e[t.nameKey],e.id=e["".concat(t.value,"Id")],e.type=t.value,e}));i[t.value]=o}},s=0;s<this.tabs.length;s++)n();this.showRelatePopover=!1,"user"===this.activeName?this.$emit("change",i,{multiple:!0,type:this.activeName}):this.$emit("change",i,{multiple:!0}),this.$emit("close")}}},_t=wt,kt=(a("15f4"),Object(L["a"])(_t,rt,dt,!1,null,"345be9a8",null)),Dt=kt.exports,xt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-card",{staticClass:"module-type-select-wrap",attrs:{"body-style":{padding:"8px",height:"100%"}}},[i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"module-type-select"},[t._l(t.showTabs,(function(e,a){return i("flexbox",{key:a,staticClass:"cell",class:{"is-select":t.selectIndex===a},nativeOn:{click:function(e){t.selectClick(a)},mouseenter:function(e){t.selectIndex=a}}},[i("i",{staticClass:"cell-icon",class:e.icon}),t._v(" "),i("div",{staticClass:"cell-label text-one-line"},[t._v(t._s(e.label))]),t._v(" "),i("div",{staticClass:"cell-value"},[t._v(t._s(e.keyName))])])})),t._v(" "),0===t.showTabs.length?i("el-empty",{attrs:{"image-size":120,image:a("f86a"),description:"暂无匹配的搜索结果"}}):t._e()],2),t._v(" "),t.showRelatePopover?i("crm-relative",{ref:"crmrelative",attrs:{visible:t.showRelatePopover,radio:!1,"data-type":t.config.value},on:{"update:visible":function(e){t.showRelatePopover=e},close:function(e){t.showRelatePopover=!1},changeCheckout:t.relateDataChange}}):t._e()],1)},It=[],Tt={name:"ModuleTypeSelect",components:{CrmRelative:gt["default"]},props:{search:String},data:function(){return{loading:!1,selectIndex:0,tabs:[{label:"客户",value:"customer",nameKey:"customerName",keyName:"/ke",icon:"wk wk-customer-line"},{label:"联系人",value:"contacts",nameKey:"name",keyName:"/lxr",icon:"wk wk-contacts-line"},{label:"商机",value:"business",nameKey:"businessName",keyName:"/sj",icon:"wk wk-business-line"},{label:"合同",value:"contract",nameKey:"num",keyName:"/ht",icon:"wk wk-contract-line"},{label:"回款",value:"receivables",nameKey:"number",keyName:"/hk",icon:"wk wk-receivables-line"}],showRelatePopover:!1}},computed:{config:function(){return this.tabs[this.selectIndex]},showTabs:function(){var t=this;return this.tabs.filter((function(e){return e.keyName.includes(t.search)}))}},watch:{},created:function(){document.addEventListener("keyup",this.keyDownHandler)},mounted:function(){},beforeDestroy:function(){document.removeEventListener("keyup",this.keyDownHandler)},methods:{keyDownHandler:function(t){"Escape"===t.code?this.close():"ArrowDown"===t.code?this.selectIndex<this.tabs.length-1&&this.selectIndex++:"ArrowUp"===t.code?this.selectIndex>0&&this.selectIndex--:"Enter"===t.code&&this.selectClick(this.selectIndex)},selectClick:function(t){this.selectIndex=t,this.showRelatePopover=!0},close:function(){this.$emit("close")},relateDataChange:function(t){var e=this,a=t.data,i={};if(a&&a.length>0){var n=a.map((function(t){return t.name=t[e.config.nameKey],t.id=t["".concat(e.config.value,"Id")],t.type=e.config.value,t}));i[this.config.value]=n}this.showRelatePopover=!1,this.$emit("change",i),this.$emit("close")}}},St=Tt,Lt=(a("697c"),Object(L["a"])(St,xt,It,!1,null,"2905e243",null)),Nt=Lt.exports,Ot={contentType:"text"},Ut={name:"ReplyComment",components:{Tinymce:st["a"],ModuleSelect:Dt,ModuleTypeSelect:Nt},props:{props:{type:Object,default:function(){}}},data:function(){return{commentLoading:!1,blurIndex:0,commentsTextarea:"",showEmoji:!1,showNoFocus:!0,moduleSelectShow:!1,moduleSelectSearch:"",moduleSelectStyle:{},moduleTypeSelectShow:!1}},computed:{config:function(){return Object(yt["a"])(Object(o["a"])({},Ot),this.props||{})},tinymceInit:function(){var t=this;return{statusbar:!1,extended_valid_elements:"span[class|title|wktag|style|contenteditable]",content_style:"p { margin: 5px 0;} html { padding: 8px; }\n              .wk-at-tag {\n                color: #005af3;\n              }\n              ",content_css:["./static/tinymce/css/tiny-wk-word.css"],setup:function(e){e.on("init",(function(t){e.focus()})),e.on("keydown",(function(e){t.tinyKeyDown(e)})),e.on("keyup",(function(e){t.tinyKeyUp(e)}))}}}},methods:{blurFun:function(t){this.blurIndex=t.target.selectionEnd},commentSubmit:function(){if(this.commentsTextarea){var t=[];if("rich"===this.config.contentType){var e=this.$refs.editor.editor,a=e.getDoc(),i=Array.from(a.querySelectorAll("[data-wk-type='user']"));t=i.map((function(t){var e,a=t.innerHTML||"";return a=a.replace(/&nbsp;/g,""),{userId:t.dataset.wkTypeId,realname:null!==(e=a)&&void 0!==e&&e.startsWith("@")?a.replace("@",""):a}}))}this.$emit("reply",this.commentsTextarea,t)}else this.$message.error("评论内容不能为空")},closeComment:function(){this.$emit("close"),this.toggleFocus()},toggleFocus:function(t){this.showNoFocus="boolean"===typeof t?t:!this.showNoFocus,this.$emit("toggle",this.showNoFocus)},moduleSelectChange:function(t,e){var a=this.getRemoveInputNode(),i=[];if(e.multiple)for(var n in t){var s=t[n];s.length>0&&i.push.apply(i,Object(ct["a"])(s))}else i.push(t);var o=this.$refs.editor.editor,l="";i.forEach((function(t){l+='<span data-wk-type="'.concat(t.type,'" data-wk-type-id="').concat(t.id,'" class="wk-at-tag" contenteditable="false"> @').concat(t.name," </span>")})),l&&o.insertContent(a.preSlice+l+a.restSlice)},moduleTypeSelectChange:function(t){},tinyKeyDown:function(t){(this.moduleSelectShow||this.moduleTypeSelectShow)&&("ArrowUp"!==t.code&&"ArrowDown"!==t.code&&"Enter"!==t.code||t.preventDefault())},tinyKeyUp:function(t){var e=this.showAt();if(this.showAtInfo=e,e.value&&"at"===e.type){var a=this.getAtUser(e.type);if(this.moduleSelectSearch=this.replaceString(a||"",e.type),this.moduleSelectShow)this.$refs.moduleSelect.keyDownHandler(t);else{var i=this.getRangeRect();this.moduleSelectStyle={top:"".concat(i.y,"px"),left:"".concat(i.x,"px")},this.moduleSelectShow=!0}}else if(e.value&&"line"===e.type){var n=this.getAtUser(e.type);if(this.moduleSelectSearch=this.replaceString(n||"",e.type),this.moduleTypeSelectShow)this.$refs.moduleTypeSelect.keyDownHandler(t);else{var s=this.getRangeRect();this.moduleSelectStyle={top:"".concat(s.y,"px"),left:"".concat(s.x,"px")},this.moduleTypeSelectShow=!0}}else this.moduleSelectShow=!1,this.moduleTypeSelectShow=!1},replaceString:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"at",a="at"===e?/@([^@\s]*)$/:/\/([^\/\s]*)$/;return t.replace(a,"")},getCursorIndex:function(){var t=this.$refs.editor.editor.selection.getSel();return null===t||void 0===t?void 0:t.focusOffset},getRangeNode:function(){var t=this.$refs.editor.editor.selection.getSel();return null===t||void 0===t?void 0:t.focusNode},getAtUser:function(t){var e,a=(null===(e=this.getRangeNode())||void 0===e?void 0:e.textContent)||"",i="at"===t?/@([^@\s]*)$/:/\/([^\/\s]*)$/,n=i.exec(a.slice(0,this.getCursorIndex()));if(n&&2===n.length)return n[1]},getRangeRect:function(){var t=this.$refs.editor.editor.selection.getSel(),e=null===t||void 0===t?void 0:t.getRangeAt(0),a=e.getClientRects()[0],i=65;return{x:a.x-12,y:a.y+i}},showAt:function(){var t=this.getRangeNode();if(!t||t.nodeType!==Node.TEXT_NODE)return!1;var e=t.textContent||"",a=/@([^@\s]*)$/,i=this.getCursorIndex(),n=a.exec(e.slice(0,i));return n&&2===n.length?{type:"at",value:!0}:{type:"",value:!1}},tinyClick:function(t){if(t.target){var e=t.target,a=e.dataset;a&&a.wkType&&a.wkTypeId&&(this.detailId=a.wkTypeId,this.detailType=a.wkType,this.detailShow=!0)}this.moduleSelectShow=!1,this.moduleTypeSelectShow=!1},getRemoveInputNode:function(){var t=this.getRangeNode();if(t){var e=(null===t||void 0===t?void 0:t.textContent)||"",a=this.getCursorIndex(),i=this.replaceString(e.slice(0,a),this.showAtInfo.type),n=e.slice(a),s=null===t||void 0===t?void 0:t.parentNode;return s&&s.removeChild(t),{preSlice:i,restSlice:n}}return{preSlice:"",restSlice:""}}}},jt=Ut,At=(a("7395"),Object(L["a"])(jt,ot,lt,!1,null,"48849836",null)),Ft=At.exports,$t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"comment-list"},[t._l(t.list,(function(e,i){return a("div",{key:i,staticClass:"comment-list-item"},[a("div",{staticClass:"parent-reply reply"},[a("div",{staticClass:"user-info"},[a("xr-avatar",{staticClass:"user-img",attrs:{id:e.user.userId,name:t.$getUserName(e.user),size:32,src:t.$getUserImg(e.user),disabled:!1}}),t._v(" "),a("div",{staticClass:"user-info__bd"},[a("span",[t._v(t._s(t.$getUserName(e.user)))]),t._v(" "),a("span",{staticClass:"time"},[t._v("\n            "+t._s(t._f("formatTime")(e.createTime))+"\n          ")])])],1),t._v(" "),a("div",{staticClass:"content",domProps:{innerHTML:t._s(e.content)},on:{click:t.handleClick}}),t._v(" "),t.showControl?a("div",{staticClass:"control"},[a("el-button",{staticClass:"reply-btn",attrs:{type:"text"},on:{click:function(e){t.handleToReply(i)}}},[t._v("回复")]),t._v(" "),a("el-button",{staticClass:"delete-btn",attrs:{type:"text"},on:{click:function(a){t.handleToDelete(e,i)}}},[t._v("删除")])],1):t._e(),t._v(" "),t.replyIndex===String(i)?a("reply-comment",{attrs:{props:t.replyConfig},on:{reply:t.handleReply,close:function(e){t.replyIndex=null}}}):t._e()],1),t._v(" "),e.childCommentList&&e.childCommentList.length>0?t._l(e.childCommentList,(function(e,n){return a("div",{key:n,staticClass:"child-reply-list"},[a("div",{staticClass:"child-reply reply"},[a("div",{staticClass:"user-info"},[a("xr-avatar",{staticClass:"user-img",attrs:{id:e.user.userId,name:t.$getUserName(e.user),size:34,src:t.$getUserImg(e.user),disabled:!1}}),t._v(" "),a("div",{staticClass:"user-info__bd"},[a("span",[t._v("\n                "+t._s(t.$getUserName(e.user))+"\n              ")]),t._v(" "),a("span",{staticClass:"time"},[t._v("\n                "+t._s(e.createTime)+"\n              ")])])],1),t._v(" "),a("div",{staticClass:"child-content"},[a("span",[t._v("\n              回复 @"+t._s(t.$getUserName(e.replyUser))+"：\n            ")]),t._v(" "),a("div",{staticClass:"content",domProps:{innerHTML:t._s(e.content)},on:{click:t.handleClick}})]),t._v(" "),t.showControl?a("div",{staticClass:"control"},[a("el-button",{staticClass:"reply-btn",attrs:{type:"text"},on:{click:function(e){t.handleToReply(i,n)}}},[t._v("回复")]),t._v(" "),a("el-button",{staticClass:"delete-btn",attrs:{type:"text"},on:{click:function(a){t.handleToDelete(e,i,n)}}},[t._v("删除")])],1):t._e(),t._v(" "),t.replyIndex===i+"-"+n?a("reply-comment",{directives:[{name:"loading",rawName:"v-loading",value:t.commentLoading,expression:"commentLoading"}],attrs:{props:t.replyConfig},on:{reply:t.handleReply,close:function(e){t.replyIndex=null}}}):t._e()],1)])})):t._e()],2)})),t._v(" "),a("c-r-m-full-screen-detail",{attrs:{id:t.detailId,visible:t.detailShow,"crm-type":t.detailType},on:{"update:visible":function(e){t.detailShow=e}}})],2)},Et=[],Rt=(a("ddb0"),{addRequest:null,addParams:null,replyKey:"pid",replyValueKey:"userId",deleteRequest:null,deleteParams:null,contentType:"text"}),Pt={name:"CommentList",components:{ReplyComment:Ft,CRMFullScreenDetail:function(){return a.e("chunk-f98d6adc").then(a.bind(null,"df3e"))}},filters:{formatTime:function(t){return Object(I["g"])(t)}},props:{props:{type:Object,default:function(){return{}}},list:{type:Array,required:!0},showControl:{type:Boolean,default:!0}},data:function(){return{replyIndex:null,commentLoading:!1,detailId:"",detailShow:!1,detailType:""}},computed:Object(o["a"])(Object(o["a"])({},Object(P["b"])(["userInfo"])),{},{config:function(){return Object(yt["a"])(Object(o["a"])({},Rt),this.props||{})},replyConfig:function(){return{contentType:this.config.contentType}},tinymceInit:function(){return{menubar:!1,statusbar:!1,extended_valid_elements:"span[class|title|wktag|style|contenteditable]",content_style:"p { margin: 5px 0;} body { margin: 0; }\n              .wk-at-tag {\n                color: #005af3;\n              }\n              ",plugins:"autoresize"}}}),methods:{handleToReply:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a="".concat(t).concat(null!==e?"-"+e:"");this.$emit("close-other-reply"),a!==this.replyIndex&&(this.replyIndex=a)},closeReply:function(){this.replyIndex=null},handleClick:function(t){var e=t.target,a=e.tagName,i=e.src,n=e.dataset;if("IMG"===a){var s=i.split("/");this.$wkPreviewFile.preview({index:0,data:[{url:i,name:s[s.length-1]}]})}else if("SPAN"===a){var o=n.wkType,l=n.wkTypeId;"user"!==o&&(this.detailId=l,this.detailType=o,this.detailShow=!0)}},handleReply:function(t,e){var a=this,i={content:t,atUserId:(e||[]).map((function(t){return t.userId}))},n=null,s=this.replyIndex.split("-"),l=this.list[s[0]];s[1]&&(n=l.childCommentList[s[1]]),l&&(i.mainId=l.commentId,i[this.config.replyKey]=this.getReplyValue(l,this.config.replyValueKey)),n&&(i[this.config.replyKey]=this.getReplyValue(n,this.config.replyValueKey)),this.commentLoading=!0,this.config.addRequest(Object(o["a"])(Object(o["a"])({},i),this.config.addParams||{})).then((function(t){t.data.user={userId:a.userInfo.userId,realname:a.$getUserName(a.userInfo),img:a.$getUserImg(a.userInfo)},t.data.replyUser=n?n.user:l.user,a.list[s[0]].childCommentList.push(t.data),a.replyIndex=null,a.commentLoading=!1})).catch((function(){a.commentLoading=!1}))},getReplyValue:function(t,e){if(e.indexOf(".")<0)return t[e];for(var a=e.split("."),i=t,n=0;n<a.length;n++)if(i=i[a[n]],void 0===i)return"";return i},handleToDelete:function(t,e){var a=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a.config.deleteRequest(Object(o["a"])({commentId:t.commentId},a.config.deleteParams||{})).then((function(t){a.$message({type:"success",message:"删除成功!"}),i>=0?a.list[e].childCommentList.splice(i,1):a.$emit("delete",e)}))})).catch((function(){}))}}},Mt=Pt,Bt=(a("a6c9"),Object(L["a"])(Mt,$t,Et,!1,null,"83beae78",null)),Kt=Bt.exports,zt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("flexbox",{staticClass:"edit-document",style:{zIndex:t.maxIndex},attrs:{align:"flex-start",justify:"flex-start"}},[a("div",{staticClass:"left"},[a("i",{staticClass:"wk wk-back-large",on:{click:t.handleBack}})]),t._v(" "),a("flexbox-item",{staticStyle:{margin:"0 15px"}},[a("tinymce",{ref:"createTinymce",staticClass:"rich-txt",attrs:{toolbar:["undo redo | bold italic underline strikethrough | charmap emoticons | fontselect fontsizeselect formatselect | rowspacingtop rowspacingbottom | lineheight | alignleft aligncenter alignright alignjustify | outdent indent |  numlist bullist | table | forecolor backcolor removeformat | pagebreak | fullscreen  preview save print | insertfile image media link anchor codesample | ltr rtl | paste | uploadFile"],init:t.getEditConfig(),height:t.editHeight},on:{input:t.debouncedEdiorInput},model:{value:t.docContent,callback:function(e){t.docContent=e},expression:"docContent"}})],1),t._v(" "),a("div",{staticClass:"right"},[a("el-button",{attrs:{type:"primary"},on:{click:t.handleSave}},[t._v("\n        发布\n      ")]),t._v(" "),a("el-button",{on:{click:t.handleBack}},[t._v("\n        取消\n      ")]),t._v(" "),a("el-dropdown",{attrs:{trigger:"click"},on:{command:t.handleCommand}},[a("el-button",{staticClass:"dropdown-btn",attrs:{icon:"el-icon-more"}}),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"preview"}},[t._v("预览")]),t._v(" "),a("el-dropdown-item",{attrs:{command:"tag"}},[t._v("添加标签")])],1)],1)],1)],1),t._v(" "),t.showTag?a("tag-dialog",{attrs:{"default-value":t.tagList},on:{update:t.handleUpdateTag,close:function(e){t.showTag=!1}}}):t._e(),t._v(" "),a("input",{ref:"fileInput",staticClass:"rc-head-file",attrs:{type:"file",accept:"*/*",multiple:""},on:{change:t.uploadFile}})],1)},Vt=[],qt=(a("4d63"),a("c607"),a("2c3e"),a("25f0"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"el-dialog__wrapper",style:{zIndex:t.zIndex}},[t.showCreate||t.showEdit?t.showCreate?a("new-tag",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{"new-tag-title":t.newTagTitle,"new-tag-input":t.newTagInput,"bg-color-props":t.bgColorProps},on:{close:t.tagClose,changeColor:t.changeColor,tagCreateSubmit:t.tagCreateSubmit,tagCancel:t.tagClose,back:t.tagClose}}):t.showEdit?a("edit-tag",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{"edit-tag-list":t.tagList},on:{back:t.tagClose,close:t.tagClose,editBtn:t.editTagClick,deleteBtn:t.deleteBtn}}):t._e():a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"tag-dialog"},[a("flexbox",{staticClass:"tag-dialog-header"},[a("div",{staticClass:"tag-dialog-header__text"},[t._v("\n        添加标签\n      ")]),t._v(" "),a("i",{staticClass:"el-icon-close icon-close",on:{click:t.handleClose}})]),t._v(" "),a("div",{staticClass:"tag-container"},[a("div",{staticClass:"search-box"},[a("el-input",{attrs:{placeholder:"搜索标签"},on:{input:t.handleSearch},model:{value:t.searchKeyword,callback:function(e){t.searchKeyword="string"===typeof e?e.trim():e},expression:"searchKeyword"}})],1),t._v(" "),a("div",{staticClass:"wrapper"},[a("div",{staticClass:"title"},[t._v("\n          已选择标签\n        ")]),t._v(" "),a("ul",{staticClass:"label-list"},t._l(t.selectedList,(function(e,i){return a("li",{key:i,staticClass:"label-list-item",style:{backgroundColor:e.color}},[a("span",[t._v(t._s(e.name))]),t._v(" "),a("i",{staticClass:"el-icon-close",on:{click:function(e){t.handleRemoveTag(i)}}})])})))]),t._v(" "),a("div",{staticClass:"wrapper"},[a("div",{staticClass:"title"},[t._v("\n          全部标签\n        ")]),t._v(" "),a("ul",{staticClass:"label-list"},t._l(t.tagList,(function(e,i){return a("li",{key:i,staticClass:"label-list-item",style:{backgroundColor:e.color},on:{click:function(a){t.handleSelect(e)}}},[a("span",[t._v(t._s(e.name))])])})))])]),t._v(" "),a("flexbox",{staticClass:"dialog-footer el-dialog__footer",attrs:{align:"center"}},[a("flexbox-item",[a("el-dropdown",{attrs:{placement:"top-start",trigger:"click"},on:{command:t.handleMoreCommand}},[a("el-button",{staticClass:"dropdown-btn",staticStyle:{"margin-right":"8px"},attrs:{icon:"el-icon-more"}}),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:"create",icon:"el-icon-plus"}},[t._v("\n              创建新标签\n            ")]),t._v(" "),a("el-dropdown-item",{attrs:{command:"setting",icon:"el-icon-setting"}},[t._v("\n              管理标签\n            ")])],1)],1)],1),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.handleConfirm}},[t._v("保存")]),t._v(" "),a("el-button",{on:{click:t.handleClose}},[t._v("取消")])],1)],1)],1)}),Gt=[],Ht=a("1c83"),Qt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"new-tag-dialog"},[a("flexbox",{staticClass:"tag-dialog-header"},[a("div",{staticClass:"tag-dialog-header__text"},[a("span",{staticClass:"el-icon-arrow-left",on:{click:t.back}}),t._v("\n      "+t._s(t.newTagTitle)+"\n    ")]),t._v(" "),a("i",{staticClass:"el-icon-close icon-close",on:{click:t.close}})]),t._v(" "),a("div",{staticClass:"search"},[a("el-input",{attrs:{maxlength:10,placeholder:"输入标签名，最多十个字符"},model:{value:t.input,callback:function(e){t.input="string"===typeof e?e.trim():e},expression:"input"}}),t._v(" "),a("span",{staticClass:"checked-color",style:{background:t.showBgColor}})],1),t._v(" "),a("div",{staticClass:"color-box"},t._l(t.colorList,(function(e,i){return a("span",{key:i,style:{background:e},on:{click:function(a){t.changeColor(e)}}})}))),t._v(" "),a("div",{staticClass:"footer"},[a("el-button",{directives:[{name:"debounce",rawName:"v-debounce",value:t.tagCreateSubmit,expression:"tagCreateSubmit"}],attrs:{type:"primary"}},[t._v("保存")]),t._v(" "),a("el-button",{on:{click:t.tagCancel}},[t._v("取消")])],1)],1)},Zt=[],Jt={props:{newTagTitle:String,newTagInput:String,bgColorProps:String},data:function(){return{colorList:["#0052CC","#00A3BF","#DE350B","#5243AA","#00875A","#FF991F","#091E42"],input:this.newTagInput,showBgColor:""}},watch:{bgColorProps:function(t){this.showBgColor=t||"#0052CC"}},mounted:function(){this.showBgColor=this.bgColorProps||"#0052CC"},methods:{back:function(){this.$emit("back")},close:function(){this.$emit("close")},changeColor:function(t){this.$emit("changeColor",t)},tagCreateSubmit:function(){this.input?this.$emit("tagCreateSubmit",this.input,this.showBgColor):this.$message.error("请输入标签名")},tagCancel:function(){this.$emit("tagCancel")}}},Yt=Jt,Wt=(a("03d4"),Object(L["a"])(Yt,Qt,Zt,!1,null,"5580c35f",null)),Xt=Wt.exports,te=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"edit-tag-dialog"},[a("flexbox",{staticClass:"tag-dialog-header"},[a("div",{staticClass:"tag-dialog-header__text"},[a("span",{staticClass:"el-icon-arrow-left",on:{click:t.back}}),t._v("\n      标签管理\n    ")]),t._v(" "),a("i",{staticClass:"el-icon-close icon-close",on:{click:t.close}})]),t._v(" "),a("div",{staticClass:"search"},[a("el-input",{attrs:{maxlength:10,placeholder:"输入标签名，最多十个字符"},model:{value:t.searchInput,callback:function(e){t.searchInput=e},expression:"searchInput"}})],1),t._v(" "),a("div",{staticClass:"content"},t._l(t.list,(function(e,i){return a("div",{key:i,staticClass:"tag-list"},[a("span",{staticClass:"tag-name",style:{background:e.color?e.color:"#ccc"}},[t._v("\n        "+t._s(e.name.length>10?e.name.substring(0,10)+"...":e.name)+"\n      ")]),t._v(" "),a("div",{staticClass:"rt"},[a("span",{staticClass:"el-icon-edit",on:{click:function(a){t.editBtn(e)}}}),t._v(" "),a("span",{staticClass:"el-icon-delete",on:{click:function(a){t.deleteBtn(e)}}})])])})))],1)},ee=[],ae={props:{editTagList:Array},data:function(){return{searchInput:""}},computed:{list:function(){var t=this;return this.editTagList.filter((function(e){return e.name.indexOf(t.searchInput)>-1}))}},watch:{},methods:{back:function(){this.$emit("back")},close:function(){this.$emit("close")},deleteBtn:function(t){this.$emit("deleteBtn",t)},editBtn:function(t){this.$emit("editBtn",t)}}},ie=ae,ne=(a("d48b"),Object(L["a"])(ie,te,ee,!1,null,"c660eae4",null)),se=ne.exports,oe={name:"TagDialog",components:{NewTag:Xt,EditTag:se},props:{defaultValue:{type:Array,default:function(){return[]}}},data:function(){return{dialogVisible:!1,zIndex:Object(I["n"])(),searchKeyword:"",selectedList:[],tagList:[],allTagList:[],newTagTitle:"新增标签",newTagInput:"",bgColorProps:"",editTagId:null,showCreate:!1,showEdit:!1,loading:!1}},created:function(){var t=this;this.selectedList=[].concat(this.defaultValue),this.getAllTag(),this.$nextTick((function(){t.dialogVisible=!0}))},methods:{getAllTag:function(){var t=this;this.loading=!0,Object(Ht["d"])().then((function(e){t.loading=!1,t.tagList=e.data||[],t.allTagList=[].concat(t.tagList),t.searchKeyword=""})).catch((function(){t.loading=!1}))},handleSearch:function(){var t=this;this.searchKeyword?this.tagList=this.allTagList.filter((function(e){return e.name.includes(t.searchKeyword)})):this.tagList=[].concat(this.allTagList)},handleSelect:function(t){var e=this.selectedList.findIndex((function(e){return e.labelId==t.labelId}));-1===e&&this.selectedList.push(t)},handleRemoveTag:function(t){this.selectedList.splice(t,1)},handleClose:function(){this.$emit("close")},handleConfirm:function(){this.$emit("update",this.selectedList),this.$emit("close")},handleMoreCommand:function(t){this.tagClose(),"create"===t?this.showCreate=!this.showCreate:"setting"===t&&(this.showEdit=!0)},tagCreateSubmit:function(t,e){var a=this;this.loading=!0;var i={name:t,color:e};this.editTagId&&(i.labelId=this.editTagId),Object(Ht["a"])(i).then((function(t){a.tagClose(),a.getAllTag(),a.loading=!1})).catch((function(){a.loading=!1}))},editTagClick:function(t){this.newTagTitle="编辑标签",this.newTagInput=t.name,this.bgColorProps=t.color,this.editTagId=t.labelId,this.showEdit=!1,this.showCreate=!0},tagClose:function(){this.newTagTitle="新增标签",this.newTagInput="",this.bgColorProps="",this.editTagId=!1,this.showCreate=!1,this.showEdit=!1},changeColor:function(t){this.bgColorProps=t},deleteBtn:function(t){var e=this;this.$confirm("确定删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.loading=!0,Object(Ht["b"])(t.labelId).then((function(){e.$message.success("删除成功!"),e.getAllTag()})).catch((function(){e.loading=!0}))})).catch()}}},le=oe,ce=(a("7fd8"),Object(L["a"])(le,qt,Gt,!1,null,"49e13b21",null)),re=ce.exports,de='<div id="wk-knowledge-title-wukong">\n  <p id="wk-knowledge-content-wukong">为页面添加标题</p>\n</div><p></p>\n',ue={name:"EditDocument",components:{Tinymce:st["a"],TagDialog:re},props:{data:{type:Object,default:function(){}}},data:function(){return{maxIndex:10,docContent:"",sysStr:"",editHeight:document.documentElement.clientHeight-30,showTag:!1,updateFlag:!1,tagList:[]}},computed:{currentUserAuth:function(){return Number(this.data.auth.currentUserAuth)},tinymce:function(){return this.$refs.createTinymce.editor}},created:function(){this.debouncedEdiorInput=Object(bt["debounce"])(300,this.editInputChange),this.maxIndex=Object(I["n"])(),this.docContent=this.data.content||"",this.tagList=Object(I["w"])(this.data.labelList||[])},methods:{handleBack:function(){this.updateFlag&&this.$emit("update"),this.$emit("back")},getEditConfig:function(){var t=this;return{menubar:!1,toolbar_sticky:!0,statusbar:!1,paste_data_images:!0,paste_enable_default_filters:!1,placeholder:"点击开始输入正文",content_style:" * {color: #262626;}",paste_retain_style_properties:"border",toolbar_mode:"floating",setup:function(e){e.on("focus",(function(e){t.docContent||t.editInputChange(t.docContent)}));var a="",i="";e.ui.registry.addContextToolbar("customToolbar",{items:"previewFile ｜ downloadFile",predicate:function(t){return"SPAN"==t.tagName&&"file"==t.getAttribute("data-wk-file-type")&&(a=t.getAttribute("data-wk-file-url"),i=t.innerText),"SPAN"==t.tagName&&"file"==t.getAttribute("data-wk-file-type")}}),e.ui.registry.addButton("previewFile",{text:'<span style="cursor: pointer;">预览</span>',onAction:function(){t.preview({url:a,name:i})}}),e.ui.registry.addButton("downloadFile",{text:'<span style="cursor: pointer;">下载</span>',onAction:function(){t.downloadFile({path:a,name:i})}}),e.ui.registry.addButton("uploadFile",{text:'<i class="wk wk-file" style="font-size: 22px"></i>',tooltip:"上传附件",onAction:function(){t.$refs.fileInput.click()}})},paste_preprocess:function(t,e){var a=["b","strong","i","em"];a.forEach((function(t){var a=new RegExp("(<".concat(t,">)|(</").concat(t,">)]"),"g");e.content=e.content.replace(a,"")}));var i=["h1","h2","h3","h4","h5","h6"];i.forEach((function(t){var a=new RegExp("<".concat(t,">"),"g"),i=new RegExp("</".concat(t,">"),"g");e.content=e.content.replace(a,"<p>"),e.content=e.content.replace(i,"</p>")})),e.content=e.content.replace(/<\/font>/gi,"").replace(/<font[^>]+>/gi,"")},paste_postprocess:function(t,e){var a=Array.from(e.node.querySelectorAll("*"));a.forEach((function(t){t.style.color="",t.style.fontWeight="",t.style.fontFamily="",t.style.fontSize="",t.style.background=""}))}}},editInputChange:function(t){t||(this.docContent=de.replace("为页面添加标题",this.data.title))},handleCommand:function(t){"tag"===t?this.showTag=!this.showTag:"preview"===t&&this.$refs.createTinymce.editor.execCommand("mcePreview")},handleUpdateTag:function(t){var e=this;this.updateFlag=!0,f({documentId:this.data.documentId,labelIds:t.map((function(t){return t.labelId})).join(","),folderId:this.data.folderId,libraryId:this.data.libraryId,status:this.data.status}).then((function(){e.updateFlag=!0,e.tagList=t,e.$message.success("标签更新成功")})).catch((function(){}))},handleSave:function(){var t=this;if([1,2,5].includes(this.currentUserAuth)&&this.docContent.replace("\n","")!==this.sysStr){var e=this.tinymce.dom.get("wk-knowledge-content-wukong"),a=this.data.title;e&&(a=e.innerText||e.textContent);var i={documentId:this.data.documentId,title:a||this.data.title,content:this.docContent,folderId:this.data.folderId,libraryId:this.data.libraryId,status:this.data.status};f(i).then((function(){t.updateFlag=!0,t.handleBack()})).catch((function(){}))}},uploadFile:function(t){for(var e=this,a=t.target.files,i=function(){var t=a[n];e.$wkUploadFile.upload({file:t,params:{batchId:""}}).then((function(a){var i=a.res.data||{},n=i.name,s=i.url;e.tinymce.insertContent('\n          <span style="color: #3578d3; cursor: pointer; outline: unset; font-size: 14px;" contenteditable="false" data-wk-file-type="file" data-wk-file-url="'.concat(s,'"">\n            <img src="').concat(Object(I["l"])(t),'" style="vertical-align: text-top;" width="15px" height="18px">\n            ').concat(n,"\n          </span>"))})).catch((function(){}))},n=0;n<a.length;n++)i();t.target.value=""},preview:function(t){this.$wkPreviewFile.preview({index:0,data:[t]})},downloadFile:function(t){Object(I["d"])(t)}}},he=ue,me=(a("a7b2"),Object(L["a"])(he,zt,Vt,!1,null,"68f7800c",null)),pe=me.exports,fe=a("8f81"),ve=a("b2e5"),ge=a.n(ve),be=(a("d9e2"),a("b311"));if(!be)throw new Error("you should npm install `clipboard` --save at first ");var ye={bind:function(t,e){if("success"===e.arg)t._v_clipboard_success=e.value;else if("error"===e.arg)t._v_clipboard_error=e.value;else{var a=new be(t,{text:function(){return e.value},action:function(){return"cut"===e.arg?"cut":"copy"}});a.on("success",(function(e){var a=t._v_clipboard_success;a&&a(e)})),a.on("error",(function(e){var a=t._v_clipboard_error;a&&a(e)})),t._v_clipboard=a}},update:function(t,e){"success"===e.arg?t._v_clipboard_success=e.value:"error"===e.arg?t._v_clipboard_error=e.value:(t._v_clipboard.text=function(){return e.value},t._v_clipboard.action=function(){return"cut"===e.arg?"cut":"copy"})},unbind:function(t,e){"success"===e.arg?delete t._v_clipboard_success:"error"===e.arg?delete t._v_clipboard_error:(t._v_clipboard.destroy(),delete t._v_clipboard)}},Ce=function(t){t.directive("Clipboard",ye)};window.Vue&&(window.clipboard=ye,Vue.use(Ce)),ye.install=Ce;var we=ye,_e={name:"ContentWord",directives:{clipboard:we},components:{ReplyComment:Ft,CommentList:Kt,EditDocument:pe,GroupControl:z,Tinymce:st["a"],WkUserDialogSelect:fe["a"],Qrcode:ge.a,NoData:D["a"]},props:{id:{type:[String,Number],required:!0}},data:function(){return{editHeight:document.documentElement.clientHeight-280,detailData:null,loading:!1,commentLoading:!1,timer:null,showGroupControl:!1,isEdit:!1,replyList:[],showReply:!0,shareLoading:!1,qrcodeOption:{width:500,height:500,colorDark:"#000000",colorLight:"#ffffff"},shareUserList:[]}},computed:Object(o["a"])(Object(o["a"])({},Object(P["b"])(["userInfo"])),{},{currentUserAuth:function(){return this.detailData&&this.detailData.auth&&this.detailData.auth.currentUserAuth||3},canAccess:function(){return this.detailData&&this.detailData.currentUserAuth>0},replyTotal:function(){var t=0;return this.replyList.forEach((function(e){t++,t+=e.childCommentList.length||0})),t},starStr:function(){var t=this.detailData.starUserList;return 0===t.length?"":this.detailData.faverStatus?t.length>1?"您和其他".concat(t.length-1,"人"):"您赞了该文档":t.length>1?"".concat(this.$getUserName(t[0]),"和其他").concat(t.length-1,"人"):"".concat(this.$getUserName(t[0]),"赞了该文档")},shareUrl:function(){return this.detailData&&this.detailData.share?"".concat(WKConfig.getLocationOrigin(),"/share/#/").concat(this.detailData.share.token):""},commentListProps:function(){return{addRequest:at,addParams:{typeId:this.id,type:"3"},replyKey:"pid",replyValueKey:"userId",deleteRequest:it,deleteParams:null}},tinymce:function(){return this.$refs.createTinymce.editor}}),watch:{id:{handler:function(){this.isEdit=!1,document.querySelector("#app").click(),this.showGroupControl=!1,this.id&&(this.getDetail(),this.getCommentList())},deep:!0,immediate:!0}},methods:{getDetail:function(){var t=this;this.id&&(this.loading=!0,g({documentId:this.id}).then((function(e){t.loading=!1,t.detailData=e.data})).catch((function(){t.loading=!1})))},handleCommand:function(t){switch(t){case"delete":this.$emit("delete",this.detailData);break;case"move":this.$emit("move",this.detailData);break}},handleToFilter:function(t){this.$router.push({path:"/knowledge/filterByLabel",query:{labelId:t}})},handleCollection:function(){var t=this,e=0===this.detailData.collectStatus?l["b"]:l["c"];e({type:this.detailData.type,typeId:this.detailData.documentId}).then((function(){t.$message.success(0===t.detailData.collectStatus?"关注成功":"已取消关注"),t.detailData.collectStatus=0===t.detailData.collectStatus?1:0})).catch((function(){}))},handleStar:function(){var t=this;C({documentId:this.id}).then((function(){var e=0==t.detailData.faverStatus?1:0;1==e?t.detailData.starUserList.push(t.userInfo):t.detailData.starUserList=t.detailData.starUserList.filter((function(e){return e.userId!=t.userInfo.userId})),t.$set(t.detailData,"faverStatus",e)})).catch()},getCommentList:function(){var t=this;nt({typeId:this.id,type:3}).then((function(e){t.replyList=e.data||[]})).catch((function(){}))},closeOtherReply:function(t){!t&&this.$refs.comment_list&&this.$refs.comment_list.closeReply()},deleteComment:function(t){this.replyList.splice(t,1)},handleReply:function(t){var e=this;this.commentLoading=!0,at(Object(o["a"])({content:t},this.commentListProps.addParams)).then((function(t){t.data.user={userId:e.userInfo.userId,realname:e.$getUserName(e.userInfo),img:e.userInfo.img},t.data.childCommentList=[],e.replyList=[t.data].concat(e.replyList),e.commentLoading=!1,e.showReply=!1,e.$nextTick((function(){e.showReply=!0}))})).catch((function(){e.commentLoading=!1}))},shareClick:function(t){var e=this;"open"==t?(this.shareLoading=!0,Object(l["p"])({documentId:this.id}).then((function(t){e.shareLoading=!1,e.$set(e.detailData,"share",t.data)})).catch(this.shareLoading=!1)):"close"==t&&(this.shareLoading=!0,Object(l["n"])({shareId:this.detailData.share.shareId}).then((function(){e.shareLoading=!1,e.$set(e.detailData,"share",null)})).catch(this.shareLoading=!1))},clipboardSuccess:function(){this.$message.success("复制成功")},shareMemberClick:function(){var t=this;this.shareUserList.length&&Object(l["o"])({documentId:this.id,shareId:this.detailData.share.shareId,shareUserIds:this.shareUserList.join(",")}).then((function(){t.shareUserList=[],t.$message.success("已分享成功")})).catch()},getEditConfig:function(){var t=this;return{menubar:!1,toolbar_sticky:!0,statusbar:!1,quickbars_selection_toolbar:!1,content_style:" * {color: #262626; outline: unset !important} ",plugins:"autoresize",contextmenu:!1,mage_advtab:!1,table_responsive_width:!1,object_resizing:!1,setup:function(e){e.on("init",(function(){e.getBody().setAttribute("contenteditable","false")}));var a="",i="";e.ui.registry.addContextToolbar("customToolbar",{items:"previewFile ｜ downloadFile",predicate:function(t){return"SPAN"==t.tagName&&"file"==t.getAttribute("data-wk-file-type")&&(a=t.getAttribute("data-wk-file-url"),i=t.innerText),"SPAN"==t.tagName&&"file"==t.getAttribute("data-wk-file-type")}}),e.ui.registry.addButton("previewFile",{text:'<span style="cursor: pointer;">预览</span>',onAction:function(){t.preview({url:a,name:i})}}),e.ui.registry.addButton("downloadFile",{text:'<span style="cursor: pointer;">下载</span>',onAction:function(){t.downloadFile({path:a,name:i})}})}}},preview:function(t){this.$wkPreviewFile.preview({index:0,data:[t]})},downloadFile:function(t){Object(I["d"])(t)}}},ke=_e,De=(a("297f"),Object(L["a"])(ke,tt,et,!1,null,"f57e6e8a",null)),xe=De.exports,Ie=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"content-main"},[a("delete-detail",{directives:[{name:"show",rawName:"v-show",value:t.showDeleteDetail,expression:"showDeleteDetail"}],attrs:{id:t.deleteDetailId,type:t.deleteDetailType},on:{close:t.deleteDetailClose,change:t.deleteDetailChange}}),t._v(" "),a("section",{directives:[{name:"show",rawName:"v-show",value:!t.showDeleteDetail,expression:"!showDeleteDetail"}],staticClass:"section static"},[a("div",{staticClass:"section-body"},[a("span",{staticClass:"tips"},[t._v("内容最多保留30天，之后将被永久删除。")]),t._v(" "),a("el-tabs",{on:{"tab-click":t.handleChange},model:{value:t.activeTab,callback:function(e){t.activeTab=e},expression:"activeTab"}},[a("el-tab-pane",{attrs:{label:"文档 "+(t.countObj.documentNum||""),name:"doc"}}),t._v(" "),a("el-tab-pane",{attrs:{label:"文件夹 "+(t.countObj.folderNum||""),name:"folder"}}),t._v(" "),a("el-tab-pane",{attrs:{label:"文件 "+(t.countObj.fileNum||""),name:"file"}})],1),t._v(" "),a("div",{staticClass:"list"},[t._l(t.list,(function(e,i){return a("flexbox",{key:i,staticClass:"list-item",nativeOn:{click:function(a){t.handleToDetail(e)}}},[2===e.type?a("i",{staticClass:"wk wk-folder file-icon folder"}):3===e.type?a("i",{staticClass:"wk wk-doc file-icon doc"}):a("img",{staticClass:"img-icon",attrs:{src:t.getFileIcon(e.title),alt:""}}),t._v(" "),a("flexbox-item",{staticClass:"list-item__name text-one-line"},[t._v(t._s(e.title)),e.fileSize?a("span",{staticClass:"list-item__info"},[t._v("（"+t._s(t._f("getFileSize")(e.fileSize))+"）")]):t._e()]),t._v(" "),a("span",{staticClass:"list-item__desc"},[t._v("删除于 "+t._s(e.deleteTime))]),t._v(" "),a("el-button",{staticStyle:{padding:"0","margin-left":"8px"},attrs:{type:"primary-text"},on:{click:function(a){a.stopPropagation(),t.recoverClick(e)}}},[t._v("恢复")]),t._v(" "),a("el-button",{staticStyle:{padding:"0"},attrs:{type:"primary-text"},on:{click:function(a){a.stopPropagation(),t.deleteClick(e,i)}}},[t._v("永久删除")])],1)})),t._v(" "),0===t.list.length?a("no-data"):t._e()],2)],1)])],1)},Te=[],Se=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"content-container"},[t.detailData?i("flexbox",{staticClass:"main-top"},[i("flexbox-item",[i("xr-breadcrumb",{on:{change:t.breadcrumbChange},model:{value:t.breadcrumbs,callback:function(e){t.breadcrumbs=e},expression:"breadcrumbs"}})],1),t._v(" "),t.breadcrumbs.length<=2?i("div",{staticClass:"control"},[i("el-button",{attrs:{type:"text"},on:{click:function(e){t.recoverClick()}}},[t._v("恢复")]),t._v(" "),i("el-button",{staticClass:"delete-btn",attrs:{type:"text"},on:{click:function(e){t.deleteClick()}}},[t._v("永久删除")])],1):t._e()],1):t._e(),t._v(" "),i("div",{staticClass:"content-folder",class:{"is-file":4==t.showType}},[t.detailData&&2==t.showType?[i("flexbox",{staticClass:"folder-father"},[i("flexbox-item",{staticClass:"folder-father__name"},[i("img",{staticClass:"icon",attrs:{src:a("bb9e"),alt:""}}),t._v(" "),i("span",[t._v(t._s(t.detailData.title||""))])])],1),t._v(" "),i("div",{staticClass:"container"},[i("div",{staticClass:"static"},[t._v("\n          "+t._s(t.detailData.childList.length)+"个文件夹，"+t._s(t.detailData.kmDocumentList.length)+"个文档\n        ")]),t._v(" "),i("ul",{staticClass:"list"},t._l(t.contentList,(function(e,a){return i("li",{key:a,staticClass:"list-item",on:{click:function(a){t.nextClick(e)}}},[i("flexbox",{attrs:{align:"center",justify:"flex-start"}},[e.hasOwnProperty("documentId")?3===e.type?i("i",{staticClass:"wk wk-doc file-icon doc"}):i("img",{staticClass:"img-icon",attrs:{src:t.getFileIcon(e.title),alt:""}}):i("i",{staticClass:"wk wk-folder file-icon folder"}),t._v(" "),i("flexbox-item",{staticClass:"list-item__name"},[t._v(t._s(e.title))])],1)],1)})))])]:t._e(),t._v(" "),t.detailData&&4==t.showType?[t.isImg?i("div",{staticClass:"img-view",staticStyle:{height:"100%"}},[i("img",{directives:[{name:"src",rawName:"v-src",value:t.detailData.content,expression:"detailData.content"}],attrs:{alt:""}})]):t.detailData.content?i("iframe",{staticClass:"preview-file",staticStyle:{width:"100%",height:"100%"},attrs:{src:t.getPreviewUrl(t.detailData.content,t.detailData.title),frameborder:"0"}}):t._e()]:t._e(),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:3==t.showType,expression:"showType == 3"}]},[t.detailData&&!t.detailData.content&&3==t.showType?i("div",{staticClass:"empty"},[t._v("\n        这个文档是空的\n      ")]):t._e(),t._v(" "),i("tinymce",{staticClass:"rich-txt",attrs:{disabled:"",toolbar:[],init:{menubar:!1,toolbar_sticky:!0,statusbar:!1,content_style:" * {color: #262626;}",plugins:"autoresize"},value:3==t.showType&&t.detailData?t.detailData.content:""}})],1)],2)],1)},Le=[],Ne=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("flexbox",{staticClass:"xr-breadcrumb"},t._l(t.showValue,(function(e,i){return a("span",{key:i,staticClass:"xr-breadcrumb__item"},["all"==e.type?[a("el-dropdown",{attrs:{trigger:"click"},on:{command:t.dropdownCommand}},[a("i",{staticClass:"el-icon-more"}),t._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.value,(function(e,i){return a("el-dropdown-item",{key:i,attrs:{command:i}},[t._v(t._s(e.label))])})))],1)]:a("span",{staticClass:"xr-breadcrumb__inner",class:{"is-current":t.currentIndex==i},on:{click:function(a){t.changeClick(e,i)}}},[t._v(t._s(e.label))]),t._v(" "),t.currentIndex!=i?a("i",{staticClass:"xr-breadcrumb__separator el-icon-arrow-right"}):t._e()],2)})))},Oe=[],Ue={name:"XrBreadcrumb",components:{},props:{value:Array,max:{type:Number,default:3}},data:function(){return{}},computed:{currentIndex:function(){return this.value&&this.value.length?this.value.length-1:0},showValue:function(){if(this.value&&this.value.length>this.max){for(var t=[{type:"all"}],e=this.max;e>0;e--){var a=this.value.length-e,i=this.value[a];i.xrBreadcrumbIndex=a,t.push(i)}return t}return this.value||[]}},watch:{},mounted:function(){},beforeDestroy:function(){},methods:{dropdownCommand:function(t){this.valueChange(t)},changeClick:function(t,e){this.value.length!=this.showValue.length?this.valueChange(t.xrBreadcrumbIndex):this.valueChange(e)},valueChange:function(t){this.$emit("change",t)}}},je=Ue,Ae=(a("b30a"),Object(L["a"])(je,Ne,Oe,!1,null,"205f975a",null)),Fe=Ae.exports,$e={name:"DeleteDetail",components:{XrBreadcrumb:Fe,Tinymce:st["a"]},props:{type:[String,Number],id:{type:[String,Number],required:!0}},data:function(){return{loading:!1,detailData:null,chooseNodeData:null,breadcrumbs:[],showType:""}},computed:{contentList:function(){return this.detailData?this.detailData.childList.concat(this.detailData.kmDocumentList):[]},isImg:function(){if(!this.detailData||3===this.detailData.type)return!1;var t=["jpg","png","jpeg","gif"],e=this.detailData.title.lastIndexOf(".");if(-1===e)return!1;var a=this.detailData.title.slice(e+1);return t.includes(a)}},watch:{id:{handler:function(t){this.id&&(this.detailData=null,this.breadcrumbs=[{label:"最近删除"}],this.showType=this.type,2==this.type?this.getFolderDetail(this.id):this.getDocDetail())},immediate:!0,deep:!0}},methods:{getPreviewUrl:function(t,e){return Object(I["E"])(t,e)},getFolderDetail:function(t){var e=this;this.loading=!0,u({folderId:t}).then((function(t){e.loading=!1,e.detailData=t.data||{},e.showType=2,e.detailData.title&&e.breadcrumbs.push({label:e.detailData.title,type:e.showType,data:t.data||{}})})).catch((function(){e.loading=!1}))},getDocDetail:function(t){var e=this;(t||this.id)&&(this.loading=!0,g({documentId:t||this.id}).then((function(t){e.loading=!1,e.detailData=t.data,e.showType=e.detailData.type,e.detailData.title&&e.breadcrumbs.push({label:e.detailData.title,type:e.showType,data:t.data||{}})})).catch((function(){e.loading=!1})))},getFileIcon:function(t){var e=t.lastIndexOf("."),a=t.slice(e+1);return Object(I["k"])(a)},getType:function(t){return t.hasOwnProperty("documentId")?"doc":"folder"},recoverClick:function(){var t=this;Object(l["v"])({id:this.id,type:this.type}).then((function(){t.$message.success("恢复成功"),t.$emit("change","restore"),t.$emit("close")})).catch()},deleteClick:function(){var t=this;this.$confirm("确定要永久删除吗，删除后将无法恢复?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var e=null,a={};2==t.type?(e=m,a.folderId=t.id):(e=y,a.documentId=t.id),e(a).then((function(){t.$message.success("删除成功"),t.$emit("change","delete"),t.$emit("close")})).catch((function(){}))})).catch((function(){}))},nextClick:function(t){t.hasOwnProperty("documentId")?(this.showType=t,this.getDocDetail(t.documentId)):this.getFolderDetail(t.folderId)},breadcrumbChange:function(t){if(0==t)this.$emit("close");else if(2==this.type&&this.breadcrumbs.length-1!=t){var e=this.breadcrumbs[t];this.detailData=e.data,this.showType=e.type||2,this.breadcrumbs=this.breadcrumbs.slice(0,t+1)}}}},Ee=$e,Re=(a("582a"),Object(L["a"])(Ee,Se,Le,!1,null,"31430087",null)),Pe=Re.exports,Me={name:"ContentDelete",components:{NoData:D["a"],DeleteDetail:Pe},filters:{getFileSize:function(t){return Object(I["f"])(Number(t))}},props:{id:{type:[String,Number],required:!0}},data:function(){return{activeTab:"doc",list:[],countObj:{},loading:!1,showDeleteDetail:!1,deleteDetailType:"",deleteDetailId:""}},created:function(){this.getDetail()},methods:{getDetail:function(){var t=this;this.loading=!0,Object(l["u"])({libraryId:this.id,type:{doc:3,folder:2,file:4}[this.activeTab]}).then((function(e){t.loading=!1,t.countObj=e.data||{},t.list=e.data.list||[]})).catch((function(){t.loading=!1}))},getFileIcon:function(t){var e=t.lastIndexOf("."),a=t.slice(e+1);return Object(I["k"])(a)},handleChange:function(){this.getDetail()},handleToDetail:function(t){this.deleteDetailId=2==t.type?t.folderId:t.documentId,this.deleteDetailType=t.type,this.showDeleteDetail=!0},recoverClick:function(t){var e=this,a=2==t.type?t.folderId:t.documentId;Object(l["v"])({id:a,type:t.type}).then((function(){e.$message.success("恢复成功"),e.$emit("change"),e.getDetail()})).catch()},deleteClick:function(t){var e=this;this.$confirm("确定要永久删除吗，删除后将无法恢复?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var a=null,i={};2==t.type?(a=m,i.folderId=t.folderId):(a=y,i.documentId=t.documentId),a(i).then((function(){e.$message.success("删除成功"),e.getDetail(),e.$emit("change")})).catch((function(){}))})).catch((function(){}))},deleteDetailClose:function(){this.showDeleteDetail=!1,this.getDetail()},deleteDetailChange:function(){this.$emit("change")}}},Be=Me,Ke=(a("bcd4"),Object(L["a"])(Be,Ie,Te,!1,null,"0047f5bc",null)),ze=Ke.exports,Ve=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"el-dialog__wrapper",staticStyle:{"z-index":"2001"}},[a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"move-dialog"},[a("flexbox",{staticClass:"move-dialog-header"},[t.showChoose?a("div",{staticClass:"box-choose"},[a("i",{staticClass:"el-icon-arrow-left icon-back",on:{click:t.handleBack}}),t._v(" "),a("span",{staticClass:"text"},[t._v("选择移动位置")])]):a("div",{staticClass:"box-move"},[t._v("\n        移动至\n      ")]),t._v(" "),a("i",{staticClass:"el-icon-close icon-close",on:{click:function(e){t.$emit("close")}}})]),t._v(" "),a("div",{staticClass:"move-dialog-body"},[a("div",{staticClass:"search-box"},[a("el-input",{attrs:{placeholder:t.placeholder},on:{input:t.handleSearchValChange},model:{value:t.searchKeyword,callback:function(e){t.searchKeyword=e},expression:"searchKeyword"}})],1),t._v(" "),t.showChoose?t.chosenLibrary?a("div",{staticClass:"choose-main"},[a("div",{staticClass:"radio-group"},[a("flexbox",{staticClass:"knowledge-item",attrs:{align:"center"}},[a("span",{staticClass:"el-radio__input",class:{"is-checked":t.chosenLibrary.isChecked},on:{click:function(e){t.handleChooseLib()}}},[a("span",{staticClass:"el-radio__inner"})]),t._v(" "),a("img",{directives:[{name:"src",rawName:"v-src",value:t.chosenLibrary.coverUrl,expression:"chosenLibrary.coverUrl"}],staticClass:"pic",attrs:{alt:""}}),t._v(" "),a("flexbox-item",{staticClass:"info-box"},[a("div",{staticClass:"name text-one-line"},[t._v("\n                "+t._s(t.chosenLibrary.name)+"\n              ")]),t._v(" "),a("div",{staticClass:"desc text-one-line"},[t._v("\n                "+t._s(t.chosenLibrary.description)+"\n              ")])])],1),t._v(" "),t._l(t.treeNode,(function(e,i){return a("flexbox",{key:i,staticClass:"folder-item",attrs:{align:"center"},nativeOn:{click:function(a){t.handleToNext(e)}}},[a("span",{staticClass:"el-radio__input",class:{"is-checked":t.isRadioCheck(e),"is-disabled":t.isRadioDisable(e)},on:{click:function(a){a.stopPropagation(),t.handleChooseNode(e)}}},[a("span",{staticClass:"el-radio__inner"})]),t._v(" "),e.hasOwnProperty("documentId")?3===e.type?a("i",{staticClass:"wk wk-doc file-icon doc"}):a("img",{staticClass:"img-icon",attrs:{src:t.getFileIcon(e.title),alt:""}}):a("i",{staticClass:"wk wk-folder file-icon folder"}),t._v(" "),a("flexbox-item",{staticClass:"text-one-line",staticStyle:{width:"0"}},[t._v(t._s(e.title))]),t._v(" "),e.childList&&e.childList.length>0?a("i",{staticClass:"el-icon-arrow-right icon-more"}):t._e()],1)}))],2)]):t._e():a("div",{staticClass:"main"},[a("div",{staticClass:"main-desc"},[t._v("\n          我参与的知识库\n        ")]),t._v(" "),a("div",{staticClass:"list"},t._l(t.filterLibraryList,(function(e,i){return a("flexbox",{key:i,staticClass:"knowledge-item",attrs:{align:"center"},nativeOn:{click:function(a){t.handleToChoose(e)}}},[a("img",{directives:[{name:"src",rawName:"v-src",value:e.coverUrl,expression:"library.coverUrl"}],staticClass:"pic",attrs:{alt:""}}),t._v(" "),a("flexbox-item",{staticClass:"info-box"},[a("div",{staticClass:"name text-one-line"},[t._v("\n                "+t._s(e.name)+"\n              ")]),t._v(" "),a("div",{staticClass:"desc text-one-line"},[t._v("\n                "+t._s(e.description)+"\n              ")])]),t._v(" "),a("i",{staticClass:"el-icon-arrow-right icon-more"})],1)})))])]),t._v(" "),a("flexbox",{staticClass:"move-dialog-footer el-dialog__footer",attrs:{align:"center"}},[t.chosenLibrary||t.chosenNode?a("flexbox-item",{staticClass:"text-one-line margin-right-interval"},[t._v("\n        移动至"+t._s(t.chosenLibrary.isChecked?t.chosenLibrary.name:t.chosenNode.title)+"\n      ")]):a("flexbox-item",{staticClass:"text-one-line"}),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.handleMove}},[t._v("\n        移动\n      ")])],1)],1)])},qe=[],Ge={name:"MoveDialog",props:{data:{type:Object,required:!0}},data:function(){return{showChoose:!1,libraryList:[],filterLibraryList:[],chosenLibrary:null,treeList:[],treeNode:[],chosenNode:null,searchKeyword:"",timer:null,stopSearch:!1,loading:!1}},computed:{placeholder:function(){return this.clearFilter(),this.showChoose?"搜索文件夹名称":"搜索知识库名称"}},created:function(){this.getLibrary()},methods:{getLibrary:function(){var t=this;this.loading=!0,Object(l["h"])().then((function(e){t.loading=!1,t.libraryList=e.data||[],t.filterLibraryList=[].concat(t.libraryList)})).catch((function(){t.loading=!1}))},handleSearchValChange:function(){var t=this;this.stopSearch||(this.timer&&(clearTimeout(this.timer),this.timer=null),this.timer=setTimeout((function(){clearTimeout(t.timer),t.timer=null,t.handleSearch()}),800))},clearFilter:function(){var t=this;this.stopSearch=!0,this.searchKeyword="",this.$nextTick((function(){t.stopSearch=!1}))},handleSearch:function(){var t=this;if(this.showChoose)this.treeNode=this.filterFolder(this.treeList),this.handleChooseLib();else{if(!this.searchKeyword)return void(this.filterLibraryList=[].concat(this.libraryList));this.filterLibraryList=this.libraryList.filter((function(e){return e.name.includes(t.searchKeyword)}))}},filterFolder:function(t){var e=this,a=[];return t.forEach((function(t){t.title.includes(e.searchKeyword)?a.push(t):t.childList&&(a=a.concat(e.filterFolder(t.childList)))})),a},getMoveTree:function(){var t=this;this.loading=!0,r({libraryId:this.chosenLibrary.libraryId}).then((function(e){t.loading=!1;var a=[];a=t.formatTreeList(e.data?e.data.childList:[]),a=a.concat(e.data.kmDocumentList||[]),t.treeList=a,t.treeNode=[].concat(a)})).catch((function(){t.loading=!1}))},formatTreeList:function(t){var e=this;return t.forEach((function(t){t.documentId||(t.childList&&0!==t.childList.length?(t.childList=t.childList.concat(t.kmDocumentList),e.formatTreeList(t.childList)):(t.childList=[],t.childList=t.childList.concat(t.kmDocumentList)))})),t},handleToChoose:function(t){this.handleChooseLib(t),this.getMoveTree(),this.showChoose=!0,this.clearFilter()},handleChooseNode:function(t){this.isRadioDisable(t)||(this.$set(this.chosenLibrary,"isChecked",!1),this.chosenNode=t)},handleToNext:function(t){this.isRadioDisable(t)||(t.childList&&t.childList.length>0?(this.handleChooseLib(),this.treeNode=t.childList):this.handleChooseNode(t),this.clearFilter())},handleChooseLib:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t&&(this.chosenLibrary=t),this.$set(this.chosenLibrary,"isChecked",!0),this.chosenNode=null},handleBack:function(){if(0===this.treeNode.length)return this.showChoose=!1,this.chosenLibrary=null,void(this.chosenNode=null);this.treeNode=this.getParentNode(this.treeNode[0].parentId,this.treeList),0===this.treeNode.length&&(this.showChoose=!1,this.chosenLibrary=null,this.chosenNode=null)},getParentNode:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=e.find((function(e){return e.folderId===t}));if(a)return e;for(var i=0;i<e.length;i++){var n=e[i];if(n.childList)return this.getParentNode(t,n.childList)}return[]},handleMove:function(){var t=this;if(this.chosenLibrary&&(this.chosenLibrary.isChecked||this.chosenNode)){this.loading=!0;var e={},a=null;this.data.documentId?(e={documentId:this.data.documentId,libraryId:this.chosenLibrary.libraryId},this.chosenNode?this.chosenNode.hasOwnProperty("documentId")?(e.type=3,e.targetId=this.chosenNode.documentId):(e.type=2,e.targetId=this.chosenNode.folderId):(e.type=0,e.targetId=0),this.chosenNode&&(e.authId=this.chosenNode.authId),a=v):(e={type:2,folderId:this.data.folderId,libraryId:this.chosenLibrary.libraryId,targetId:this.chosenNode?this.chosenNode.folderId:0},this.chosenNode&&(e.authId=this.chosenNode.authId),a=p),a(e).then((function(){t.loading=!1,t.$message.success("移动成功"),t.$emit("update"),t.$emit("close")})).catch((function(){t.loading=!1}))}else this.$message.error("请选择目标文件夹")},getFileIcon:function(t){var e=t.lastIndexOf("."),a=t.slice(e+1);return Object(I["k"])(a)},isRadioDisable:function(t){if(4==t.type||3==t.type)return!0;if(!this.data.hasOwnProperty("documentId")){if(3==t.type)return!0;if(this.data.folderId==t.folderId)return!0}return 3==this.data.type&&this.data.documentId==t.documentId},isRadioCheck:function(t){return!(!this.chosenNode||4===t.type)&&(t.hasOwnProperty("documentId")?t.documentId===this.chosenNode.documentId:t.folderId===this.chosenNode.folderId)}}},He=Ge,Qe=(a("c122"),Object(L["a"])(He,Ve,qe,!1,null,"372c6f14",null)),Ze=Qe.exports,Je={name:"KnowledgeMain",filters:{getType:function(t){return t.hasOwnProperty("documentId")?"renamedoc":"renamefolder"}},components:{ContentMain:O,ContentFolder:H,ContentFile:X,ContentWord:xe,ContentDelete:ze,MoveDialog:Ze},beforeRouteUpdate:function(t,e,a){this.initInfo(t),a()},data:function(){return{activeCom:"ContentMain",libraryData:null,showMove:!1,moveItem:null,treeList:[],treeConfig:{label:"title",children:"childList"},domIds:[],chooseNodeData:null,dialogTitle:"新建文件夹",dialogVisible:!1,dialogLabel:"文件夹名称",folderOrDocName:null,editData:null,nowCommand:null,loading:!1,refreshKey:Date.now(),canAccess:!1}},computed:{currentNodeKey:function(){if(!this.chooseNodeData||0===Object.keys(this.chooseNodeData).length)return"";var t=this.chooseNodeData;return this.chooseNodeData.documentId?"".concat(t.libraryId,"-").concat(t.folderId,"-").concat(t.documentId):"".concat(t.libraryId,"-").concat(t.folderId)}},watch:{currentNodeKey:{handler:function(t,e){var a=this;this.$nextTick((function(){setTimeout((function(){a.domIds.forEach((function(a){if(a===t||a===e){var i=document.getElementById(a);if(i){var n=i.parentNode.className;n=n.replace(" current",""),t===a&&(n+=" current"),i.parentNode.setAttribute("class",n)}}}))}),400)}))}},activeCom:function(t){"ContentDelete"!=t&&"ContentMain"!=t||(this.chooseNodeData=null)}},created:function(){this.initInfo(this.$route)},methods:{getDetail:function(){var t=this;Object(l["i"])({libraryId:this.libraryId}).then((function(e){t.libraryData=e.data})).catch((function(){}))},initInfo:function(t){this.libraryId=t.query.id;var e=t.query.folderId,a=t.query.documentId,i=t.query.type,n=null;(e||0==e)&&(n={libraryId:this.libraryId,folderId:e},a&&(n.documentId=a,n.type=Number(i))),this.getFolderTree(n),this.getDetail()},getFolderTree:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;r({libraryId:this.libraryId}).then((function(a){if(t.canAccess=1==a.data.currentUserAuth,t.canAccess){var i=[];i=t.formatTreeList(a.data?a.data.childList:[]),i=i.concat(a.data.kmDocumentList||[]),t.domIds=[],t.treeList=t.addNodeKey(i),t.$nextTick((function(){e?t.handleNodeClick(e):t.activeCom||(t.activeCom="ContentMain")}))}else t.treeList=[]})).catch()},formatTreeList:function(t){var e=this;return t.forEach((function(t){t.documentId||(t.childList&&0!==t.childList.length?(t.childList=t.childList.concat(t.kmDocumentList),e.formatTreeList(t.childList)):(t.childList=[],t.childList=t.childList.concat(t.kmDocumentList)))})),t},addNodeKey:function(t){var e=this;return t.forEach((function(t){t.nodeKey="".concat(t.libraryId,"-").concat(t.folderId),t.documentId&&4==t.type?t.nodeKey+="-".concat(t.documentId):(3==t.type&&(t.nodeKey+="-".concat(t.documentId)),e.addNodeKey(t.childList)),e.domIds.push(t.nodeKey)})),t},getFileIcon:function(t){var e=t.lastIndexOf("."),a=t.slice(e+1);return Object(I["k"])(a)},homeClick:function(){this.$refs.catalogTree.setCurrentKey(null),this.activeCom="ContentMain"},checkDeleteClick:function(){this.$refs.catalogTree.setCurrentKey(null),this.activeCom="ContentDelete"},handleNodeClick:function(t){this.chooseNodeData=t,t.hasOwnProperty("documentId")?3===t.type?this.activeCom="ContentWord":4===t.type&&(this.activeCom="ContentFile"):this.activeCom="ContentFolder"},handleToMove:function(t){this.moveItem=t,this.showMove=!0},handleRootCommand:function(t){this.handleCommand(t,null,{})},handleCommand:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(this.folderOrDocName=null,this.nowCommand=t,e&&(this.editData=Object(I["w"])(e)),t){case"doc":this.dialogTitle="新建文档",this.dialogLabel="文档名称",this.dialogVisible=!0;break;case"folder":this.dialogTitle="新建文件夹",this.dialogLabel="文件夹名称",this.dialogVisible=!0;break;case"upload":this.handleToChooseFile();break;case"renamedoc":this.handleToRename("doc",this.editData);break;case"renamefolder":this.handleToRename("folder",this.editData);break;case"delete":this.deleteFolderOrDoc(e);break;case"move":this.handleToMove(e);break}},handleToChooseFile:function(){this.$refs.fileHook.value=null,this.$refs.fileHook.click()},handleFileUpload:function(t){var e=this,a=t.target.files[0];this.loading=!0,this.$wkUploadFile.upload({file:a}).then((function(t){var a=t.res;e.createFile(a.data||{})})).catch((function(){e.loading=!1}))},createFile:function(t){var e=this,a={content:"".concat(t.url),title:t.name,libraryId:this.libraryId,folderId:this.editData&&this.editData.folderId?this.editData.folderId:0,status:1,type:4};f(a).then((function(){e.$message.success("添加成功"),e.loading=!1,e.dialogVisible=!1,e.nowCommand=null,e.editData=null,e.refreshKey=Date.now(),e.getFolderTree()})).catch()},handleToRename:function(t,e){this.dialogTitle="doc"===t?"重命名文档":"重命名文件夹",this.dialogLabel="doc"===t?"文档名称":"文件夹名称",this.nowCommand="doc"===t?"renamedoc":"renamefolder",this.folderOrDocName=e.title,this.editData=e,this.dialogVisible=!0},createFolderOrDoc:function(){var t=this;if(this.folderOrDocName){var e=null,a={title:this.folderOrDocName,libraryId:this.libraryId};["renamedoc","doc"].includes(this.nowCommand)?(e=f,a=Object(o["a"])(Object(o["a"])({},a),{},{content:"",status:1,type:this.editData&&this.editData.type?this.editData.type:3}),"doc"==this.nowCommand&&this.editData&&3==this.editData.type?(a.folderId=0,a.parentId=this.editData.documentId):a.folderId=this.editData&&this.editData.folderId?this.editData.folderId:0,"renamedoc"===this.nowCommand&&(a.documentId=this.editData.documentId,delete a.content)):(e=d,a=Object(o["a"])(Object(o["a"])({},a),{},{parentId:this.editData?this.editData.folderId:0}),"renamefolder"===this.nowCommand&&(a.folderId=this.editData.folderId,a.parentId=this.editData.parentId)),this.loading=!0,e(a).then((function(e){t.$message.success("操作成功"),t.loading=!1,t.dialogVisible=!1,t.editData=null,["doc","folder"].includes(t.nowCommand)?t.getFolderTree(e.data):t.getFolderTree(),t.refreshKey=Date.now(),t.nowCommand=null})).catch((function(){t.loading=!1}))}else this.$message.error("名称不能为空")},deleteFolderOrDoc:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e||(e=this.chooseNodeData);var a=e.hasOwnProperty("documentId")?"doc":"folder",i="folder"===a?"您确定要删除该文件夹及文件夹下所有内容吗？<br/>删除30天内可在知识库【".concat(this.libraryData?this.libraryData.name:"","】的最近删除恢复"):"您确定要删除该文档吗？<br/>删除30天内可在知识库【".concat(this.libraryData?this.libraryData.name:"","】的最近删除恢复");this.$confirm(i,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",dangerouslyUseHTMLString:!0,type:"warning"}).then((function(){var i="folder"===a?h:b,n="folder"===a?"folderId":"documentId";i(Object(s["a"])({},n,e[n])).then((function(){t.$message({type:"success",message:"删除成功!"}),"ContentDelete"===t.activeCom?t.$refs.contentDelete.getDetail():"ContentMain"===t.activeCom||t.treeList.length?"ContentMain"!==t.activeCom&&"ContentDelete"!==t.activeCom&&(!1===t.deleteChangeSelect(e)?t.activeCom="ContentMain":t.$nextTick((function(){var e=t.$refs.catalogTree.getNode(t.currentNodeKey);e&&e.data&&t.handleNodeClick(e.data)}))):t.activeCom="ContentMain",t.getFolderTree()})).catch()})).catch((function(){}))},deleteChangeSelect:function(t){var e="";e=t.documentId?"".concat(t.libraryId,"-").concat(t.folderId,"-").concat(t.documentId):"".concat(t.libraryId,"-").concat(t.folderId);var a=this.getBrotherNodeKey(e);if(!a)return!1;var i=a.split("-");if(3==i.length)this.chooseNodeData={libraryId:i[0],folderId:i[1],documentId:i[2]};else{if(2!=i.length)return!1;this.chooseNodeData={libraryId:i[0],folderId:i[1]}}},getBrotherNodeKey:function(t){var e=-1;return this.domIds.forEach((function(a,i){t==a&&(e=i)})),e>=0?this.domIds[e+1]||this.domIds[e-1]:null}}},Ye=Je,We=(a("d1a3"),Object(L["a"])(Ye,i,n,!1,null,"1e30de37",null));e["default"]=We.exports},"98cc":function(t,e,a){},9992:function(t,e,a){},"9a4b":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{staticClass:"crm-ralative",attrs:{visible:t.visible,"close-on-click-modal":!1,title:t.getTitle(),width:t.contentWidth,"append-to-body":""},on:{close:t.closeView}},[a("div",{ref:"crContainer",staticClass:"cr-container-wrap"},[a("div",{staticClass:"cr-container"},[t.currentDataType||t.config.isCommon?t._e():a("div",{staticClass:"cr-body-side"},t._l(t.leftSides,(function(e,i){return a("div",{key:i,staticClass:"side-item",class:t.leftType===e.type?"side-item-select":"side-item-default",on:{click:function(a){t.sideClick(e)}}},[t._v(t._s(e.name)+"\n          "),e.num>0?a("span",{staticClass:"side-item__num"},[t._v(t._s("("+e.num+")"))]):t._e()])}))),t._v(" "),t.config.isCommon?a("div",[a("crm-relative-table",{ref:"moduleTable",attrs:{props:t.config,"selected-data":t.currentSelectedData[t.leftType]},on:{"selection-change":function(e){t.selectionChange(e,t.leftSides.find((function(e){return e.type===t.leftType})))}}})],1):a("div",{style:{"padding-left":t.currentDataType?"0":"150px"}},[a("keep-alive",{attrs:{include:t.leftSides.filter((function(t){return t.loaded})).map((function(t){return t.component}))}},[a(t.getCurrentComponent(t.leftType),{ref:"moduleTable",tag:"component",staticClass:"crm-table-index",attrs:{props:t.componentConfig[t.leftType],"selected-data":t.currentSelectedData[t.leftType]},on:{"selection-change":function(e){t.selectionChange(e,t.leftSides.find((function(e){return e.type===t.leftType})))}}})],1)],1)]),t._v(" "),a("div",{class:["dialog-footer",{"is-common":t.config.isCommon}]},[t._t("footer"),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.confirmClick(!1)}}},[t._v("确定")]),t._v(" "),a("el-button",{on:{click:t.closeView}},[t._v("取消")])],2)])])},n=[],s=a("5530"),o=(a("d3b7"),a("3ca3"),a("ddb0"),a("159b"),a("b64b"),a("14d9"),a("b0c0"),a("ed08")),l=a("8ed6"),c={isCommon:!1,type:"",name:"",dataType:null,showTypes:null,params:null,paramsObj:null,mainTableProps:null},r={name:"CrmRelatieve",components:{CrmRelativeTable:function(){return a.e("chunk-584b0f95").then(a.bind(null,"38dd"))}},provide:function(){return{elForm:"",elFormItem:""}},props:{props:Object,dataType:String,showTypes:Array,selectedData:{type:Object,default:function(){return{}}},visible:Boolean,radio:{type:Boolean,default:!0}},data:function(){return{leftType:"",leftSides:[],currentSelectedData:{}}},computed:{config:function(){return Object(l["a"])(Object(s["a"])({},c),this.props||{})},currentDataType:function(){return this.dataType||this.config.dataType},currentShowTypes:function(){return this.showTypes||this.config.showTypes||["customer","contacts","leads","business","contract","product","receivables"]},componentConfig:function(){var t=this,e=function(e){var a={};t.currentDataType?a=t.config.params:t.config.paramsObj&&t.config.paramsObj[e]&&(a=t.config.paramsObj[e]);var i=Object(s["a"])({isSelect:!0,showModuleName:!1,selectionHandle:!1,radio:t.radio,params:a,otherHeight:340},t.config.mainTableProps||{});return i},a={};return this.leftSides.forEach((function(t){a[t.type]=e(t.type)})),a},contentWidth:function(){return this.currentDataType&&!this.config.isCommon?"1050px":"910px"}},watch:{visible:function(t){var e=this;t&&this.$nextTick((function(){var t=e.getCurrentMainTable();t.updateTableHeight&&t.updateTableHeight()}))},selectedData:function(t){this.handleCurrentSelectData(t)}},mounted:function(){this.handleCurrentSelectData(this.selectedData)},methods:{handleCurrentSelectData:function(t){if(this.config.isCommon){var e={};e[this.config.type]=[],this.currentSelectedData=e}else if(t&&Object.keys(t).length)this.currentSelectedData=Object(o["w"])(t);else{var a={};if(this.currentDataType)a[this.currentDataType]=[],this.currentSelectedData=a;else{for(var i=0;i<this.currentShowTypes.length;i++){var n=this.currentShowTypes[i];a[n]=[]}this.currentSelectedData=a}}if(this.config.isCommon)this.leftSides.push({name:this.config.name,isCommon:!0,loaded:!0,num:0,type:this.config.type}),this.leftType=this.config.type;else if(0===this.leftSides.length){var s=this.getLeftItems();if(this.currentDataType){var l=s[this.currentDataType];l.loaded=!0,this.leftSides.push(l),this.leftType=this.currentDataType}else{for(var c=0;c<this.currentShowTypes.length;c++){var r=s[this.currentShowTypes[c]],d=this.currentSelectedData[r.type];r.num=d?d.length:0,this.leftSides.push(r)}if(this.leftSides.length>0){var u=this.leftSides[0];u.loaded=!0,this.leftType=u.type}}}else if(!this.currentDataType)for(var h=0;h<this.leftSides.length;h++){var m=this.leftSides[h],p=this.currentSelectedData[m.type];m.num=p?p.length:0}},refreshList:function(){this.$refs["crm"+this.currentDataType][0].refreshList()},sideClick:function(t){this.leftType=t.type,t.loaded=!0},closeView:function(){this.$emit("cancel"),this.closeEmit()},closeEmit:function(){this.$emit("close"),this.$emit("update:visible",!1)},selectionChange:function(t,e){e.num=t.length,this.currentSelectedData[this.leftType]=t},confirmClick:function(){var t=this;this.currentDataType&&(this.currentSelectedData[this.leftType]=this.getCurrentMainTable().selectionList),this.currentDataType?this.$emit("changeCheckout",{data:this.currentSelectedData[this.currentDataType]?this.currentSelectedData[this.currentDataType]:[],props:this.config}):this.$emit("changeCheckout",{data:this.currentSelectedData,props:this.config}),this.$nextTick((function(){t.closeEmit()}))},getCurrentMainTable:function(){return this.$refs.moduleTable},getCurrentComponent:function(t){var e;return(null===(e=this.getLeftItems()[t])||void 0===e?void 0:e.component)||"CrmRelativeTable"},getTitle:function(){return this.config.isCommon?this.config.name:"leads"==this.currentDataType?"关联线索模块":"customer"==this.currentDataType?"关联客户模块":"contacts"==this.currentDataType?"关联联系人模块":"business"==this.currentDataType?"关联商机模块":"product"==this.currentDataType?"关联产品模块":"contract"==this.currentDataType?"关联合同模块":"receivables"==this.currentDataType?"关联回款模块":"item"==this.currentDataType?"关联事项":"module"==this.currentDataType?"关联产品模块":"关联相关信息"},setSelections:function(t){this.getCurrentMainTable().setSelections(t)},toggleRowSelection:function(t,e,a){this.getCurrentMainTable().toggleRowSelection(t,e,a)},getLeftItems:function(){return{customer:{name:"客户",loaded:!1,num:0,type:"customer",component:"CustomerIndex"},contacts:{name:"联系人",loaded:!1,num:0,type:"contacts",component:"ContactsIndex"},leads:{name:"线索",loaded:!1,num:0,type:"leads",component:"LeadsIndex"},business:{name:"商机",loaded:!1,num:0,type:"business",component:"BusinessIndex"},contract:{name:"合同",loaded:!1,num:0,type:"contract",component:"ContractIndex"},product:{name:"产品",loaded:!1,num:0,type:"product",component:"ProductIndex"},receivables:{name:"回款",loaded:!1,num:0,type:"receivables",component:"ReceivablesIndex"}}}}},d=r,u=(a("b530"),a("2877")),h=Object(u["a"])(d,i,n,!1,null,"a87b8168",null);e["default"]=h.exports},"9d2c":function(t,e,a){t.exports=a.p+"static/img/share.3d1e0ce3.png"},a6c9:function(t,e,a){"use strict";a("ccee")},a7b2:function(t,e,a){"use strict";a("899c")},b1af:function(t,e,a){},b30a:function(t,e,a){"use strict";a("fe5b")},b530:function(t,e,a){"use strict";a("1d17")},bb9e:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyFpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTQyIDc5LjE2MDkyNCwgMjAxNy8wNy8xMy0wMTowNjozOSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpFRUUwQjg3QTY5QzAxMUVBQUZFREI5NEQyNDExM0MxQyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpFRUUwQjg3QjY5QzAxMUVBQUZFREI5NEQyNDExM0MxQyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkVFRTBCODc4NjlDMDExRUFBRkVEQjk0RDI0MTEzQzFDIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkVFRTBCODc5NjlDMDExRUFBRkVEQjk0RDI0MTEzQzFDIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+0j16XAAABJpJREFUeNrsnLtv01AUxm/aQCkgKI9SSqG0UCoEYkQsCBgQQixI/AOMDEiwISYkJGYGkFAlBDsDYmKCiYmFR9UX4RXaUmgKqUMa2qaxffmOcxwi1Edi3yS95B7pk+3EtXx/Oa97bYhIKYWxpa3BIDCADCADyAAygAwgA8gAMmYABbBoKSddvudtItBmaDdvwxhdawGaghLQXC0hvBh0xFxWio8PosEA8YBOQlehw2X83XJGk8BZ6Cl0m2HVxHZtjYhP32VwD4IdgW5CJypwf53sQXeh6VoA6thGgMLloHPQsQrd3yboItReKw9qboqILRsjoQAd4JColHVBG2qZhzq2hwP031tbS0MoQJVeVaPr/6ppOW8MUearYOTfZzhhqzYCPwxlKtYHVQnQnQpd+xPUBz0MUiXrIQfth25B54M4RL0k6SboNLTHAFqmYQ4yRaonQI1BxltPgNZwMahJFaO51BvIKqpKq80Gi+6vqoBGoPvQK+45qOlzq9BcltNCCO6DJqoNaJL7l77V5i4OfiIXsh2Z38fPlbNFBNsGHEfwuUPfO9452MrFM05YQC+hJ0XHrdBRaC+0lj1pSfNuEDdm29IbQOFmCzfOn+MzuzBg+k7m9938d97gaevKwjVW8KbiBbvXUHyplBwW0DeRXxEUybTcYWXkNdzgJdzgRm8Q8u+AaUD+IPz9VWA29Ai6wZCkSkAOA/JKaGzCPTszK69wtdDFaPwX6PeFrotFln7DlPkJ3zVns3IH4BzXDI5vzdAp3irtg0ahL7STsCR1qD0a90huJRrFUd+DJi3Zgs1BTeHY3CMtqAY0TlWAHpekZ2Ub9ts0BZSG3qoGNM+AnERKNvGSgq7TFosB5VQCogT9lcNrGza9GuefFDSwVOcfFBCt0n2dh1P++i1bNQZEUMbEMg8twwAaS6S85L9d4wSdYe9RvtxB1SuJ8k77O0UNH/qFtB9cwZQA8ucxlO3HskhpqYykTrRL4/xDodWv2oMovBIJy6UA3skVTFejeeQH1R70DvqO8k77HRp30BQJ78UK61ZBPOj9Qg6zi4x33XaNPYjWsoZXOimIB8VQvdL8Tzw6NO6gqZcbUgXIh0MvPE0gvKi+04IYvW3WqCkgeiNoRKUHkc/EF2zxc3rGcx/ynE6hr42KEp7XlwrIP294KuVOc3jt1bjET69UvYKG2DvMvX7yPj3G7dYUUJwrmFJAMmeLEYSX75ad3EXrGl4xlYAoqFIIr3EOr0ZO0BFNAX3xVyNUAaJVt2GEl1UUXrs1hZNlQEIloFzOEUPJGZnm427ugXQ0mip9Vg3IRngNILxSfLxPYw/6wJCUAnISlqS2/HcRoFaNPSiuFJDtiEQyLWkNmjroKOegqIZwJIdXVimgqZSMuVL4+Ufn+RdNL8bL+YOSAE1abj/Pw8h6NQY0Isp8BaakMEF4UVn0Xzfo0bhBjJfa/5TlQfRWSdHhIU09iMZA689J5R70z/ntnKwdTcBInrU/h55x01sxQOtF/jHJuqKcpEPnTDn0cTkddGESav73FzWNogFkzAAygAwgA8gAMoAMoDqzPwIMAD/JuQUGpCZYAAAAAElFTkSuQmCC"},bc73:function(t,e,a){},bcd4:function(t,e,a){"use strict";a("98cc")},c122:function(t,e,a){"use strict";a("f347")},ccee:function(t,e,a){},d1a3:function(t,e,a){"use strict";a("3aa1")},d48b:function(t,e,a){"use strict";a("6b4a")},e5bb:function(t,e,a){},f0a8:function(t,e,a){},f347:function(t,e,a){},f612:function(t,e,a){},f86a:function(t,e,a){t.exports=a.p+"static/img/data.ed0530b9.png"},f880:function(t,e,a){},fb4d:function(t,e,a){},fe5b:function(t,e,a){}}]);