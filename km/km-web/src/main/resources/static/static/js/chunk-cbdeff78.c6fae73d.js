(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cbdeff78"],{"047e":function(t,e,n){"use strict";n("609e")},1926:function(t,e,n){t.exports={colorPrimary:"#0052cc",colorBlack:"#172b4d",colorSuccess:"#36b37e",colorWarning:"#ffab00",colorDanger:"#ff5630",colorN40:"#dfe1e6",axisLineColor:"#dfe1e6",axisLabelFontWeight:"500"}},"1bfc":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wk-filter-header"},[n("flexbox",{directives:[{name:"show",rawName:"v-show",value:!t.selectionList||0===t.selectionList.length,expression:"!selectionList || selectionList.length === 0"}],staticClass:"filter-wrap"},[t.config.showSearch?n("el-input",{staticClass:"search-input",attrs:{placeholder:t.config.searchPlaceholder},on:{input:t.inputChange},nativeOn:{keyup:function(e){return!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchInput(e)}},model:{value:t.inputContent,callback:function(e){t.inputContent="string"===typeof e?e.trim():e},expression:"inputContent"}},[n("el-button",{attrs:{slot:"suffix",type:"icon",icon:"wk wk-sousuo"},on:{click:t.searchInput},slot:"suffix"})],1):t._e(),t._v(" "),t._t("left-start"),t._v(" "),n("div",{ref:"filterTabs",staticClass:"tabs"},[t.showTabs&&t.showTabs.length>0?[n("span",{staticClass:"tabs-label"},[t._v("显示:")]),t._v(" "),t._l(t.showTabs,(function(e,i){return n("el-button",{key:i,attrs:{title:e.label,type:e.value===t.currentActiveTab?"selected":null,icon:e.icon},on:{click:function(n){t.tabsClick(e)}}},[t._v(t._s(e.label))])}))]:t._e(),t._v(" "),t.config.tabSetShow||t.otherTabs.length>0||t.$slots.dropdownMore?n("el-dropdown",{attrs:{trigger:"click"},on:{command:t.otherClick}},[n("el-button",{staticClass:"dropdown-btn",attrs:{type:t.otherActiveTabName?"selected":null}},[n("span",[t._v(t._s(t.otherActiveTabName))]),t._v(" "),n("i",{staticClass:"el-icon-arrow-down",staticStyle:{"margin-left":"0"}})]),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[t._l(t.otherTabs,(function(e,i){return n("el-dropdown-item",{key:i,class:{"is-select":t.currentActiveTab===e.value},attrs:{command:e.value}},[t._v("\n            "+t._s(e.label)+"\n          ")])})),t._v(" "),n("div",{class:{"none-other":0===t.otherTabs.length}},[t._t("dropdownMore")],2),t._v(" "),t.config.tabSetShow?n("el-dropdown-item",{attrs:{divided:t.otherTabs.length>0,command:t.config.tabSetCommand}},[n("span",{staticClass:"wk-filter-btn"},[n("i",{staticClass:"wk wk-manage"}),t._v(t._s(t.config.tabSetLabel)+"\n            ")])]):t._e()],2)],1):t._e(),t._v(" "),t._t("left-end")],2),t._v(" "),n("div",{staticClass:"filter-right"},[t._t("right")],2)],2),t._v(" "),t.selectionList&&t.selectionList.length>0?n("flexbox",{staticClass:"selection-bar"},[n("div",{staticClass:"selected—title"},[t._v("已选中 "),n("span",{staticClass:"selected—count"},[t._v(t._s(t.selectionList.length))]),t._v(" 项")]),t._v(" "),n("flexbox",{staticClass:"selection-items-box"},t._l(t.operations,(function(e,i){return n("el-button",{key:i,attrs:{icon:e.icon,size:"medium"},on:{click:function(n){t.selectionBarClick(e.type)}}},[t._v(t._s(e.name))])})))],1):t._e(),t._v(" "),t._t("default")],2)},a=[],s=n("b85c"),o=(n("a9e3"),n("fb6a"),n("7db0"),n("d3b7"),n("ac1f"),n("841c"),n("4de4"),n("a630"),n("3ca3"),n("caad"),n("8ed6")),r=n("7a1a"),c={name:"WkFilterHeader",components:{},props:{props:Object,search:String,selectionList:Array,activeTab:[String,Number],tabs:Array,operations:{type:Array,default:function(){return[]}}},data:function(){return{inputContent:"",currentActiveTab:"",currentMaxTabCount:5,observer:null}},computed:{config:function(){return Object(o["a"])({showSearch:!0,searchPlaceholder:"",maxTabCount:5,tabSetShow:!1,tabSetLabel:"设置",tabSetCommand:"set"},this.props||{})},showTabs:function(){return this.tabs&&this.tabs.length>this.currentMaxTabCount?this.tabs.slice(0,this.currentMaxTabCount):this.tabs},otherTabs:function(){return this.tabs&&this.tabs.length>this.currentMaxTabCount?this.tabs.slice(this.currentMaxTabCount):[]},otherActiveTabName:function(){var t=this;if(!this.tabs||!this.tabs.length||!this.otherTabs.length)return"";var e=this.otherTabs.find((function(e){return e.value===t.currentActiveTab}));return e?e.label:""}},watch:{activeTab:{handler:function(){void 0!==this.activeTab&&null!==this.activeTab&&this.currentActiveTab!==this.activeTab&&(this.currentActiveTab=this.activeTab)},immediate:!0},tabs:{handler:function(){this.changeTabsSize()},immediate:!0},search:{handler:function(){this.inputContent!==this.search&&(this.inputContent=this.search)},immediate:!0}},created:function(){this.debounceResizeWindow=Object(r["debounce"])(300,this.resizeWindow)},mounted:function(){this.debounceResizeWindow(),this.domUpdate(),window.addEventListener("resize",this.debounceResizeWindow)},beforeDestroy:function(){window.removeEventListener("resize",this.debounceResizeWindow),this.observer&&this.observer.disconnect()},methods:{resizeWindow:function(){this.currentMaxTabCount=this.config.maxTabCount,this.changeTabsSize()},domUpdate:function(){var t=this,e={attributes:!0,childList:!0,subtree:!0},n=function(e){var n,i=Object(s["a"])(e);try{for(i.s();!(n=i.n()).done;){var a=n.value;"childList"===a.type&&t.debounceResizeWindow()}}catch(o){i.e(o)}finally{i.f()}},i=new MutationObserver(n);i.observe(this.$el,e),this.observer=i},changeTabsSize:function(){var t=this;this.$nextTick((function(){var e=t.$refs.filterTabs;if(e)for(var n=e.getBoundingClientRect(),i=n.x+n.width,a=Array.from(e.childNodes||[]).filter((function(t){return["DIV","BUTTON","SPAN"].includes(t.tagName)})),s=a.length-1;s>=0;s--){var o=a[s],r=o.getBoundingClientRect(),c=r.x+r.width;if(!(c>i))break;t.currentMaxTabCount--}}))},searchInput:function(){this.$emit("event-change","search",this.inputContent)},inputChange:function(){this.$emit("update:search",this.inputContent),this.$emit("event-change","searchUpdate",this.inputContent)},otherClick:function(t){if(t===this.config.tabSetCommand)this.$emit("event-change",t);else{var e=this.tabs.find((function(e){return e.value===t}));e?this.tabsClick(e):this.$emit("event-change",t)}},tabsClick:function(t){this.currentActiveTab=t.value,this.debounceResizeWindow(),this.$emit("update:activeTab",this.currentActiveTab),this.$emit("tabs-change",t)},selectionBarClick:function(t){this.$emit("operations-click",t)}}},l=c,u=(n("2f69"),n("9187"),n("2877")),d=Object(u["a"])(l,i,a,!1,null,"7a6f438c",null);e["a"]=d.exports},2309:function(t,e,n){"use strict";n("d302")},"2f69":function(t,e,n){"use strict";n("1926")},"609e":function(t,e,n){},7310:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"knowledge-collection"},[n("wk-page-header",{attrs:{title:"我的关注"}}),t._v(" "),n("wk-filter-header",{attrs:{tabs:t.tabsList,"active-tab":t.activeTab,props:{tabSetShow:!1,showSearch:!1}},on:{"update:activeTab":function(e){t.activeTab=e},"tabs-change":t.refreshList}}),t._v(" "),n("div",{staticClass:"container"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{data:t.dataList,height:"calc(100% - 45px)"},on:{"row-click":t.handleRowClick}},[n("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("div",{staticClass:"file-main"},[1===e.row.type?n("i",{staticClass:"wk wk-book file-icon library"}):2===e.row.type?n("i",{staticClass:"wk wk-folder file-icon folder"}):3===e.row.type?n("i",{staticClass:"wk wk-doc file-icon doc"}):n("img",{staticClass:"img-icon",attrs:{src:t.getFileIcon(e.row.title),alt:""}}),t._v(" "),n("span",{staticClass:"file-name"},[t._v("\n              "+t._s(1===e.row.type?e.row.libraryName:e.row.title)+"\n            ")]),t._v(" "),e.row.description?n("span",{staticClass:"file-desc"},[t._v("\n              "+t._s(e.row.description)+"\n            ")]):t._e()])]}}])}),t._v(" "),"library"!=t.activeTab?n("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"所属知识库",prop:"libraryName"}}):t._e(),t._v(" "),"file"==t.activeTab?n("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"文件大小",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(t._f("getFileSize")(e.row.fileSize))+"\n        ")]}}])}):t._e(),t._v(" "),n("el-table-column",{attrs:{"show-overflow-tooltip":"",label:"关注时间",width:"240"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          关注于"+t._s(e.row.createTime)+"\n        ")]}}])}),t._v(" "),n("el-table-column",{attrs:{"show-overflow-tooltip":"",width:"80",align:"center",fixed:"right"},scopedSlots:t._u([{key:"header",fn:function(t){return[n("i",{staticClass:"el-icon-star-off focus-icon is-disabled"})]}},{key:"default",fn:function(e){return[n("el-button",{staticStyle:{padding:"0"},attrs:{type:"text"},on:{click:function(n){n.stopPropagation(),t.cancelCollection(e.row)}}},[n("i",{staticClass:"wk wk-focus-on file-collect-icon"})])]}}])})],1),t._v(" "),n("div",{staticClass:"p-contianer"},[n("el-pagination",{staticClass:"p-bar",attrs:{"current-page":t.currentPage,"page-sizes":t.pageSizes,"page-size":t.pageSize,total:t.total,"pager-count":5,background:"",layout:"prev, pager, next, sizes, total, jumper"},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)],1)],1)},a=[],s=(n("a9e3"),n("fb6a"),n("14d9"),n("b729")),o=n("fdca"),r=n("1bfc"),c=n("ed08"),l={name:"KnowledgeCollection",components:{WkPageHeader:o["a"],WkFilterHeader:r["a"]},filters:{getFileSize:function(t){return Object(c["f"])(Number(t))}},data:function(){return{loading:!1,tabsList:[{label:"全部",value:"all"},{label:"知识库",value:"library"},{label:"文档",value:"doc"},{label:"文件夹",value:"folder"},{label:"上传文件",value:"file"}],activeTab:"all",staticData:{allNum:0,documentNum:0,libraryNum:0,fileNum:0,folderNum:0},dataList:[],currentPage:1,pageSize:15,pageSizes:[15,30,60,100],total:100}},created:function(){this.getList()},methods:{refreshList:function(){this.dataList=[],this.handleCurrentChange(1)},getList:function(){var t=this;this.loading=!0,Object(s["d"])({page:this.currentPage,limit:this.pageSize,type:{all:0,library:1,doc:3,folder:2,file:4}[this.activeTab]}).then((function(e){var n=e.data.page||{},i=e.data||{};i.allNum=i.documentNum+i.fileNum+i.folderNum+i.libraryNum,t.staticData=i,t.dataList=n.list||[],t.total=n.totalRow,t.loading=!1})).catch((function(){t.loading=!1}))},getFileIcon:function(t){var e=t.lastIndexOf("."),n=t.slice(e+1);return Object(c["k"])(n)},handleRowClick:function(t,e,n){var i={id:t.libraryId,folderId:t.folderId};t.documentId&&(i.documentId=t.documentId,i.type=t.type),i.navActiveMenu="/knowledge/collection",this.$router.push({path:"/knowledge/main",query:i})},cancelCollection:function(t){var e=this,n={type:t.type,typeId:t.typeId};Object(s["c"])(n).then((function(){e.getList()})).catch((function(){}))},handleSizeChange:function(t){this.pageSize=t,this.getList()},handleCurrentChange:function(t){this.currentPage=t,this.getList()}}},u=l,d=(n("047e"),n("2877")),h=Object(d["a"])(u,i,a,!1,null,"1baa73e3",null);e["default"]=h.exports},"7c26":function(t,e,n){},9187:function(t,e,n){"use strict";n("7c26")},d302:function(t,e,n){},fdca:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("flexbox",{staticClass:"wk-page-header",attrs:{justify:"space-between"}},[n("div",{staticClass:"wk-page-header__left"},[t.title||t.$slots.title?n("span",{staticClass:"wk-page-header-title"},[t._t("title",[t._v(t._s(t.title))])],2):t._e(),t._v(" "),t.help?n("i",{staticClass:"wk wk-icon-fill-help wk-help-tips",attrs:{"data-type":t.help.type,"data-id":t.help.id}}):t._e(),t._v(" "),t._t("left")],2),t._v(" "),n("div",{staticClass:"wk-page-header__center"},[t._t("center")],2),t._v(" "),n("div",{staticClass:"wk-page-header__right"},[t._t("right"),t._v(" "),t.dropdowns&&t.dropdowns.length>0?n("el-dropdown",{class:{"margin-left-interval":t.$slots.right},attrs:{trigger:"click"},on:{command:t.dropdownCommand}},[n("el-button",{staticClass:"dropdown-btn",attrs:{icon:"el-icon-more"}}),t._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},t._l(t.dropdowns,(function(e,i){return n("el-dropdown-item",{key:i,attrs:{icon:e.icon,command:e.command}},[t._v(t._s(e.name))])})))],1):t._e()],2)])},a=[],s={name:"WkPageHeader",components:{},props:{title:String,dropdowns:Array,help:Object},data:function(){return{}},computed:{},watch:{},created:function(){},mounted:function(){},beforeDestroy:function(){},methods:{dropdownCommand:function(t){this.$emit("command",t)}}},o=s,r=(n("2309"),n("2877")),c=Object(r["a"])(o,i,a,!1,null,"985b7582",null);e["a"]=c.exports}}]);